{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Jira功能拓展优化整合版","options":{"check_for_updates":true,"user_modified":1729475495389,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["http://jira-ex.transsion.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[],"orig_run_in":[],"orig_tags":[]}},"storage":{"ts":1724306789693,"data":{}},"enabled":true,"position":1,"file_url":"https://raw.githubusercontent.com/Lemou-Memo/jira/main/Jira%20Functionality%20Enhancement%20and%20Integration.js","uuid":"45ae6473-1ec7-49df-b5d9-56a6219eefdb","source":"Ly8gPT1Vc2VyU2NyaXB0PT0NCi8vIEBuYW1lICAgICAgICAgSmlyYeWKn+iDveaLk+WxleS8mOWMluaVtOWQiOeJiA0KLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8NCi8vIEB2ZXJzaW9uICAgICAgMi4yDQovLyBAZGVzY3JpcHRpb24gIOWFs+mUruivjemrmOS6ruOAgeW9k+WJjeeUqOaIt+WKoOeyl+OAgeWkjeWItuaMiemSruOAgWJ1Z+aPkOekuuaMiemSruOAgeaXtumXtOaYvuekuuS8mOWMluetieWKn+iDveeahOaVtOWQiA0KLy8gQGF1dGhvciAgICAgICBqaWFsZS5wYW4NCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL2ppcmEtZXgudHJhbnNzaW9uLmNvbS8qDQovLyBAZ3JhbnQgICAgICAgIG5vbmUNCi8vIEB1cGRhdGVVUkwgICAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0xlbW91LU1lbW8vbW1pX3dvcmsvcmVmcy9oZWFkcy9tYXN0ZXIvJUU4JTg0JTlBJUU2JTlDJUFDL0ppcmElMjBjaHJvbWUuanMNCi8vIEBkb3dubG9hZFVSTCAgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0xlbW91LU1lbW8vbW1pX3dvcmsvcmVmcy9oZWFkcy9tYXN0ZXIvJUU4JTg0JTlBJUU2JTlDJUFDL0ppcmElMjBjaHJvbWUuanMNCi8vID09L1VzZXJTY3JpcHQ9PQ0KDQooZnVuY3Rpb24oKSB7DQogICAgJ3VzZSBzdHJpY3QnOw0KDQogICAgLy8gPT3lhbPplK7or43pq5jkuq7lkozlvZPliY3nlKjmiLfliqDnspfpg6jliIY9PQ0KICAgIGxldCBrZXl3b3JkcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2hpZ2hsaWdodGVkS2V5d29yZHMnKSkgfHwgWyLmoIflh4bljJYiLCAi5LiJ5pa5IiwgIueyieS4nSJdOw0KICAgIGNvbnN0IGVmZmVjdFN0eWxlID0gYA0KICAgICAgICAuaGlnaGxpZ2h0ZWQta2V5d29yZCB7DQogICAgICAgICAgICBjb2xvcjogIzAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQogICAgICAgIH0NCiAgICAgICAgLmN1cnJlbnQtdXNlciB7DQogICAgICAgICAgICBjb2xvcjogIzAwODAwMDsNCiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICB9DQogICAgICAgIC5mbG9hdGluZy1wYW5lbCB7DQogICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgYm90dG9tOiA4MHB4Ow0KICAgICAgICAgICAgbGVmdDogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYzsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDhweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICB3aWR0aDogMjUwcHg7DQogICAgICAgICAgICBib3gtc2hhZG93OiAwcHggNHB4IDhweCByZ2JhKDAsIDAsIDAsIDAuMik7DQogICAgICAgICAgICB6LWluZGV4OiAxMDAwMDsNCiAgICAgICAgfQ0KICAgICAgICAuZmxvYXRpbmctcGFuZWwgaW5wdXQgew0KICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDYwcHgpOw0KICAgICAgICAgICAgcGFkZGluZzogNXB4Ow0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgIH0NCiAgICAgICAgLmZsb2F0aW5nLXBhbmVsIGJ1dHRvbiB7DQogICAgICAgICAgICB3aWR0aDogNDBweDsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgIH0NCiAgICAgICAgLmtleXdvcmQtaXRlbSB7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogNXB4Ow0KICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgfQ0KICAgICAgICAua2V5d29yZC1pdGVtIHNwYW4gew0KICAgICAgICAgICAgZmxleC1ncm93OiAxOw0KICAgICAgICB9DQogICAgICAgIC5rZXl3b3JkLWl0ZW0gLmRlbGV0ZS1idG4gew0KICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZGMzNTQ1Ow0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgcGFkZGluZzogMnB4IDVweDsNCiAgICAgICAgfQ0KICAgICAgICAudG9nZ2xlLWJ1dHRvbiB7DQogICAgICAgICAgICBwb3NpdGlvbjogZml4ZWQ7DQogICAgICAgICAgICBib3R0b206IDIwcHg7DQogICAgICAgICAgICBsZWZ0OiAyMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTsNCiAgICAgICAgICAgIHdpZHRoOiA1MHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA1MHB4Ow0KICAgICAgICAgICAgZm9udC1zaXplOiAyNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgICAgei1pbmRleDogMTAwMDA7DQogICAgICAgIH0NCiAgICBgOw0KICAgIGNvbnN0IHN0eWxlU2hlZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpOw0KICAgIHN0eWxlU2hlZXQudHlwZSA9ICJ0ZXh0L2NzcyI7DQogICAgc3R5bGVTaGVldC5pbm5lclRleHQgPSBlZmZlY3RTdHlsZTsNCiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlU2hlZXQpOw0KDQogICAgZnVuY3Rpb24gaGlnaGxpZ2h0VGV4dChub2RlKSB7DQogICAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzKSB7DQogICAgICAgICAgICBsZXQgdGV4dCA9IG5vZGUubm9kZVZhbHVlOw0KICAgICAgICAgICAgbGV0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTsNCiAgICAgICAgICAgIGxldCBtb2RpZmllZFRleHQgPSB0ZXh0Ow0KDQogICAgICAgICAgICBmb3IgKGxldCBrZXl3b3JkIG9mIGtleXdvcmRzKSB7DQogICAgICAgICAgICAgICAgbGV0IHJlZ2V4ID0gbmV3IFJlZ0V4cChgKCR7a2V5d29yZH0pYCwgImdpIik7DQogICAgICAgICAgICAgICAgaWYgKHJlZ2V4LnRlc3QobW9kaWZpZWRUZXh0KSkgew0KICAgICAgICAgICAgICAgICAgICBtb2RpZmllZFRleHQgPSBtb2RpZmllZFRleHQucmVwbGFjZShyZWdleCwgYDxzcGFuIGNsYXNzPSJoaWdobGlnaHRlZC1rZXl3b3JkIiBkYXRhLWtleXdvcmQ9IiR7a2V5d29yZH0iPiQxPC9zcGFuPmApOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgaWYgKG1vZGlmaWVkVGV4dCAhPT0gdGV4dCkgew0KICAgICAgICAgICAgICAgIGxldCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpOw0KICAgICAgICAgICAgICAgIHNwYW4uaW5uZXJIVE1MID0gbW9kaWZpZWRUZXh0Ow0KICAgICAgICAgICAgICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoc3Bhbiwgbm9kZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMSAmJiBub2RlLmNoaWxkTm9kZXMpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgICAgaGlnaGxpZ2h0VGV4dChub2RlLmNoaWxkTm9kZXNbaV0pOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2xlYXJIaWdobGlnaHRzKCkgew0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGlnaGxpZ2h0ZWQta2V5d29yZCcpLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgICAgICBjb25zdCB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGVsZW1lbnQuaW5uZXJUZXh0KTsNCiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQodGV4dE5vZGUsIGVsZW1lbnQpOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50VXNlcigpIHsNCiAgICAgICAgY29uc3QgdXNlckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaGVhZGVyLWRldGFpbHMtdXNlci1mdWxsbmFtZScpOw0KICAgICAgICByZXR1cm4gdXNlckVsZW1lbnQgPyB1c2VyRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdXNlcm5hbWUnKSA6IG51bGw7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGlnaGxpZ2h0Q3VycmVudFVzZXIoKSB7DQogICAgICAgIGNvbnN0IGN1cnJlbnRVc2VybmFtZSA9IGdldEN1cnJlbnRVc2VyKCk7DQogICAgICAgIGlmIChjdXJyZW50VXNlcm5hbWUpIHsNCiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLmFzc2lnbmVlIGEudXNlci1ob3ZlciwgdGQucmVwb3J0ZXIgYS51c2VyLWhvdmVyJykuZm9yRWFjaCh1c2VyTGluayA9PiB7DQogICAgICAgICAgICAgICAgY29uc3QgdXNlcm5hbWUgPSB1c2VyTGluay5nZXRBdHRyaWJ1dGUoJ3JlbCcpOw0KICAgICAgICAgICAgICAgIGlmICh1c2VybmFtZSA9PT0gY3VycmVudFVzZXJuYW1lKSB7DQogICAgICAgICAgICAgICAgICAgIHVzZXJMaW5rLmNsYXNzTGlzdC5hZGQoJ2N1cnJlbnQtdXNlcicpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KICAgIGhpZ2hsaWdodEN1cnJlbnRVc2VyKCk7DQogICAgLy8gZnVuY3Rpb24gdXBkYXRlSGlnaGxpZ2h0cygpIHsNCiAgICAvLyAgICAgY2xlYXJIaWdobGlnaHRzKCk7DQogICAgLy8gICAgIGhpZ2hsaWdodFRleHQoZG9jdW1lbnQuYm9keSk7DQogICAgLy8gfQ0KICAgIC8vIHVwZGF0ZUhpZ2hsaWdodHMoKTsNCg0KICAgIC8vIGNvbnN0IGZsb2F0aW5nUGFuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCiAgICAvLyBmbG9hdGluZ1BhbmVsLmNsYXNzTmFtZSA9ICJmbG9hdGluZy1wYW5lbCI7DQogICAgLy8gZmxvYXRpbmdQYW5lbC5pbm5lckhUTUwgPSBgDQogICAgLy8gICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBpZD0ibmV3S2V5d29yZCIgcGxhY2Vob2xkZXI9Iua3u+WKoOWFs+mUruivjSIgLz4NCiAgICAvLyAgICAgPGJ1dHRvbiBpZD0iYWRkS2V5d29yZCI+KzwvYnV0dG9uPg0KICAgIC8vICAgICA8ZGl2IGlkPSJrZXl3b3JkTGlzdCI+PC9kaXY+DQogICAgLy8gYDsNCiAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGZsb2F0aW5nUGFuZWwpOw0KDQogICAgLy8gY29uc3QgdG9nZ2xlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYnV0dG9uIik7DQogICAgLy8gdG9nZ2xlQnV0dG9uLmNsYXNzTmFtZSA9ICJ0b2dnbGUtYnV0dG9uIjsNCiAgICAvLyB0b2dnbGVCdXR0b24udGV4dENvbnRlbnQgPSAi4piwIjsNCiAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvZ2dsZUJ1dHRvbik7DQoNCiAgICAvLyB0b2dnbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsNCiAgICAvLyAgICAgZmxvYXRpbmdQYW5lbC5zdHlsZS5kaXNwbGF5ID0gZmxvYXRpbmdQYW5lbC5zdHlsZS5kaXNwbGF5ID09PSAibm9uZSIgfHwgIWZsb2F0aW5nUGFuZWwuc3R5bGUuZGlzcGxheSA/ICJibG9jayIgOiAibm9uZSI7DQogICAgLy8gICAgIHJlbmRlcktleXdvcmRMaXN0KCk7DQogICAgLy8gfSk7DQoNCiAgICAvLyBmdW5jdGlvbiByZW5kZXJLZXl3b3JkTGlzdCgpIHsNCiAgICAvLyAgICAgY29uc3Qga2V5d29yZExpc3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgia2V5d29yZExpc3QiKTsNCiAgICAvLyAgICAga2V5d29yZExpc3REaXYuaW5uZXJIVE1MID0gIiI7DQoNCiAgICAvLyAgICAga2V5d29yZHMuZm9yRWFjaCgoa2V5d29yZCwgaW5kZXgpID0+IHsNCiAgICAvLyAgICAgICAgIGNvbnN0IGtleXdvcmRJdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgLy8gICAgICAgICBrZXl3b3JkSXRlbS5jbGFzc05hbWUgPSAia2V5d29yZC1pdGVtIjsNCiAgICAvLyAgICAgICAgIGtleXdvcmRJdGVtLmlubmVySFRNTCA9IGANCiAgICAvLyAgICAgICAgICAgICA8c3Bhbj4ke2tleXdvcmR9PC9zcGFuPg0KICAgIC8vICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9ImRlbGV0ZS1idG4iIGRhdGEtaW5kZXg9IiR7aW5kZXh9Ij7liKDpmaQ8L2J1dHRvbj4NCiAgICAvLyAgICAgICAgIGA7DQogICAgLy8gICAgICAgICBrZXl3b3JkTGlzdERpdi5hcHBlbmRDaGlsZChrZXl3b3JkSXRlbSk7DQogICAgLy8gICAgIH0pOw0KDQogICAgLy8gICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5kZWxldGUtYnRuIikuZm9yRWFjaChidXR0b24gPT4gew0KICAgIC8vICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7DQogICAgLy8gICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldEF0dHJpYnV0ZSgiZGF0YS1pbmRleCIpOw0KICAgIC8vICAgICAgICAgICAgIGtleXdvcmRzLnNwbGljZShpbmRleCwgMSk7DQogICAgLy8gICAgICAgICAgICAgc2F2ZUtleXdvcmRzKCk7DQogICAgLy8gICAgICAgICAgICAgdXBkYXRlSGlnaGxpZ2h0cygpOw0KICAgIC8vICAgICAgICAgICAgIHJlbmRlcktleXdvcmRMaXN0KCk7DQogICAgLy8gICAgICAgICB9KTsNCiAgICAvLyAgICAgfSk7DQogICAgLy8gfQ0KDQogICAgLy8gZnVuY3Rpb24gc2F2ZUtleXdvcmRzKCkgew0KICAgIC8vICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaGlnaGxpZ2h0ZWRLZXl3b3JkcycsIEpTT04uc3RyaW5naWZ5KGtleXdvcmRzKSk7DQogICAgLy8gfQ0KDQogICAgLy8gZnVuY3Rpb24gY2hlY2tLZXl3b3JkQ29udGFpbm1lbnQobmV3S2V5d29yZCkgew0KICAgIC8vICAgICBmb3IgKGxldCBrZXl3b3JkIG9mIGtleXdvcmRzKSB7DQogICAgLy8gICAgICAgICBpZiAoa2V5d29yZC5pbmNsdWRlcyhuZXdLZXl3b3JkKSB8fCBuZXdLZXl3b3JkLmluY2x1ZGVzKGtleXdvcmQpKSB7DQogICAgLy8gICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgLy8gICAgICAgICB9DQogICAgLy8gICAgIH0NCiAgICAvLyAgICAgcmV0dXJuIGZhbHNlOw0KICAgIC8vIH0NCg0KICAgIC8vIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhZGRLZXl3b3JkIikuYWRkRXZlbnRMaXN0ZW5lcigiY2xpY2siLCBmdW5jdGlvbigpIHsNCiAgICAvLyAgICAgY29uc3QgbmV3S2V5d29yZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuZXdLZXl3b3JkIikudmFsdWUudHJpbSgpOw0KICAgIC8vICAgICBpZiAobmV3S2V5d29yZCAmJiAha2V5d29yZHMuaW5jbHVkZXMobmV3S2V5d29yZCkpIHsNCiAgICAvLyAgICAgICAgIGlmICghY2hlY2tLZXl3b3JkQ29udGFpbm1lbnQobmV3S2V5d29yZCkpIHsNCiAgICAvLyAgICAgICAgICAgICBrZXl3b3Jkcy5wdXNoKG5ld0tleXdvcmQpOw0KICAgIC8vICAgICAgICAgICAgIHNhdmVLZXl3b3JkcygpOw0KICAgIC8vICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuZXdLZXl3b3JkIikudmFsdWUgPSAiIjsNCiAgICAvLyAgICAgICAgICAgICB1cGRhdGVIaWdobGlnaHRzKCk7DQogICAgLy8gICAgICAgICAgICAgcmVuZGVyS2V5d29yZExpc3QoKTsNCiAgICAvLyAgICAgICAgIH0gZWxzZSB7DQogICAgLy8gICAgICAgICAgICAgYWxlcnQoIuWFs+mUruivjeS4jueOsOacieWFs+mUruivjeWtmOWcqOWMheWQq+WFs+ezu++8jOaXoOazlea3u+WKoO+8gSIpOw0KICAgIC8vICAgICAgICAgfQ0KICAgIC8vICAgICB9IGVsc2UgaWYgKGtleXdvcmRzLmluY2x1ZGVzKG5ld0tleXdvcmQpKSB7DQogICAgLy8gICAgICAgICBhbGVydCgi5YWz6ZSu6K+N5bey5a2Y5Zyo77yBIik7DQogICAgLy8gICAgIH0NCiAgICAvLyB9KTsNCiAgICAvLyByZW5kZXJLZXl3b3JkTGlzdCgpOw0KDQogICAgLy8gPT1KaXJh5Yqf6IO95ouT5bGV6YOo5YiGPT0NCiAgICBmdW5jdGlvbiBjcmVhdGVDb3B5QnV0dG9uKGFuY2hvciwgcm93KSB7DQogICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSAn5aSN5Yi26ZO+5o6lJzsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihidXR0b24uc3R5bGUsIHsNCiAgICAgICAgICAgIG1hcmdpbkxlZnQ6ICc1cHgnLA0KICAgICAgICAgICAgZm9udFNpemU6ICcxMnB4JywNCiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyMwMDdiZmYnLA0KICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsDQogICAgICAgICAgICBib3JkZXI6ICdub25lJywNCiAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsDQogICAgICAgICAgICBwYWRkaW5nOiAnMnB4IDVweCcsDQogICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJw0KICAgICAgICB9KTsNCg0KICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiBjb3B5VG9DbGlwYm9hcmQoYW5jaG9yLmhyZWYpKTsNCiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKCkgPT4gY29weVN1bW1hcnlDb250ZW50KHJvdykpOw0KDQogICAgICAgIHJldHVybiBidXR0b247DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQpIHsNCiAgICAgICAgaWYgKG5hdmlnYXRvci5jbGlwYm9hcmQpIHsNCiAgICAgICAgICAgIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpDQogICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gc2hvd05vdGlmaWNhdGlvbign6ZO+5o6l5bey5aSN5Yi25Yiw5Ymq6LS05p2/IScsICcjMjhhNzQ1JykpDQogICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiBzaG93Tm90aWZpY2F0aW9uKCflpI3liLbpk77mjqXlpLHotKU6ICcgKyBlcnIsICcjZGMzNTQ1JykpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZmFsbGJhY2tDb3B5VG9DbGlwYm9hcmQodGV4dCk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBmYWxsYmFja0NvcHlUb0NsaXBib2FyZCh0ZXh0KSB7DQogICAgICAgIGNvbnN0IHRleHRBcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTsNCiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0Ow0KICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRleHRBcmVhKTsNCiAgICAgICAgdGV4dEFyZWEuc2VsZWN0KCk7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpOw0KICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbign6ZO+5o6l5bey5aSN5Yi25Yiw5Ymq6LS05p2/IScsICcjMjhhNzQ1Jyk7DQogICAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbign5aSN5Yi26ZO+5o6l5aSx6LSlOiAnICsgZXJyLCAnI2RjMzU0NScpOw0KICAgICAgICB9DQogICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQodGV4dEFyZWEpOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNob3dOb3RpZmljYXRpb24obWVzc2FnZSwgYmFja2dyb3VuZENvbG9yKSB7DQogICAgICAgIGNvbnN0IG5vdGlmaWNhdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICBub3RpZmljYXRpb24udGV4dENvbnRlbnQgPSBtZXNzYWdlOw0KICAgICAgICBPYmplY3QuYXNzaWduKG5vdGlmaWNhdGlvbi5zdHlsZSwgew0KICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsDQogICAgICAgICAgICBib3R0b206ICcxMHB4JywNCiAgICAgICAgICAgIHJpZ2h0OiAnMTBweCcsDQogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJhY2tncm91bmRDb2xvciwNCiAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLA0KICAgICAgICAgICAgcGFkZGluZzogJzEwcHgnLA0KICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNXB4JywNCiAgICAgICAgICAgIHpJbmRleDogJzEwMDAwJw0KICAgICAgICB9KTsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChub3RpZmljYXRpb24pOw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG5vdGlmaWNhdGlvbi5yZW1vdmUoKSwgMjAwMCk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdXBkYXRlQ29sdW1uSGVhZGVycygpIHsNCiAgICAgICAgY29uc3QgaGVhZGVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoLmNvbEhlYWRlckxpbmsgc3BhbicpOw0KICAgICAgICBoZWFkZXJzLmZvckVhY2goc3BhbiA9PiB7DQogICAgICAgICAgICBzd2l0Y2ggKHNwYW4udGV4dENvbnRlbnQpIHsNCiAgICAgICAgICAgICAgICBjYXNlICflhbPplK7lrZcnOg0KICAgICAgICAgICAgICAgICAgICBzcGFuLnRleHRDb250ZW50ID0gJ+WFs+mUruWtlyjngrnlh7vmnKzpobXpnaLot7PovawpJzsNCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAgY2FzZSAn5qaC6KaBJzoNCiAgICAgICAgICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9ICfmpoLopoEo54K55Ye75paw5bu66aG16Z2i6Lez6L2sKSc7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjcmVhdGVNYXJrQnV0dG9uKHJvdykgew0KICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihidXR0b24uc3R5bGUsIHsNCiAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsDQogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMzQzYTQwJywNCiAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLA0KICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsDQogICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLA0KICAgICAgICAgICAgcGFkZGluZzogJzJweCA1cHgnLA0KICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsDQogICAgICAgICAgICBtYXJnaW5MZWZ0OiAnNXB4Jw0KICAgICAgICB9KTsNCg0KICAgICAgICB1cGRhdGVCdXR0b24ocm93LCBidXR0b24pOw0KDQogICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4gew0KICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7DQogICAgICAgICAgICBoYW5kbGVDbGljayhyb3cpOw0KICAgICAgICB9KTsNCg0KICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgaGFuZGxlRG91YmxlQ2xpY2soYnV0dG9uLCByb3cpOw0KICAgICAgICB9KTsNCg0KICAgICAgICByZXR1cm4gYnV0dG9uOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZUJ1dHRvbihyb3csIGJ1dHRvbikgew0KICAgICAgICBjb25zdCB0aW1lRWxlbWVudCA9IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC51cGRhdGVkIHRpbWUnKTsNCiAgICAgICAgY29uc3QgY3VycmVudERhdGV0aW1lID0gdGltZUVsZW1lbnQgPyB0aW1lRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJykgOiBudWxsOw0KICAgICAgICBjb25zdCBpc3N1ZUtleSA9IGdldElzc3VlS2V5KHJvdyk7DQogICAgICAgIGNvbnN0IHN0b3JlZERhdGEgPSByb3dEYXRhW2lzc3VlS2V5XTsNCiAgICAgICAgaWYgKHN0b3JlZERhdGEpIHsNCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9IHN0b3JlZERhdGEuY2xpY2tlZCA/ICflt7LlpITnkIYnIDogJ+acquWkhOeQhic7DQogICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gc3RvcmVkRGF0YS5jbGlja2VkID8gJyMyOGE3NDUnIDogJyMzNDNhNDAnOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ+acquWkhOeQhic7DQogICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMzNDNhNDAnOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGFuZGxlQ2xpY2socm93KSB7DQogICAgICAgIGNvbnN0IGlzc3VlS2V5ID0gZ2V0SXNzdWVLZXkocm93KTsNCiAgICAgICAgaWYgKHJvd0RhdGFbaXNzdWVLZXldPy5jbGlja2VkKSByZXR1cm47DQoNCiAgICAgICAgcm93RGF0YVtpc3N1ZUtleV0gPSB7DQogICAgICAgICAgICBjbGlja2VkOiB0cnVlLA0KICAgICAgICAgICAgbGFzdFVwZGF0ZWQ6IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC51cGRhdGVkIHRpbWUnKS5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJykNCiAgICAgICAgfTsNCiAgICAgICAgc2F2ZVJvd0RhdGEocm93RGF0YSk7DQogICAgICAgIHVwZGF0ZVJvdyhyb3cpOyAvLyBFbnN1cmUgdGhlIGJ1dHRvbiBzdGF0ZSBpcyB1cGRhdGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNsaWNrDQogICAgfQ0KDQogICAgZnVuY3Rpb24gaGFuZGxlRG91YmxlQ2xpY2soYnV0dG9uLCByb3cpIHsNCiAgICAgICAgY29uc3QgaXNzdWVLZXkgPSBnZXRJc3N1ZUtleShyb3cpOw0KICAgICAgICBpZiAocm93RGF0YVtpc3N1ZUtleV0/LmNsaWNrZWQpIHsNCiAgICAgICAgICAgIGRlbGV0ZSByb3dEYXRhW2lzc3VlS2V5XTsNCiAgICAgICAgICAgIHNhdmVSb3dEYXRhKHJvd0RhdGEpOw0KICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ+acquWkhOeQhic7DQogICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMzNDNhNDAnOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gdXBkYXRlUm93KHJvdykgew0KICAgICAgICBjb25zdCB0aW1lRWxlbWVudCA9IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC51cGRhdGVkIHRpbWUnKTsNCiAgICAgICAgaWYgKHRpbWVFbGVtZW50KSB7DQogICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZXRpbWUgPSB0aW1lRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJyk7DQogICAgICAgICAgICBjb25zdCBpc3N1ZUtleSA9IGdldElzc3VlS2V5KHJvdyk7DQogICAgICAgICAgICBjb25zdCBzdG9yZWREYXRhID0gcm93RGF0YVtpc3N1ZUtleV07DQoNCiAgICAgICAgICAgIGlmIChzdG9yZWREYXRhICYmIHN0b3JlZERhdGEubGFzdFVwZGF0ZWQgIT09IGN1cnJlbnREYXRldGltZSkgew0KICAgICAgICAgICAgICAgIHJvd0RhdGFbaXNzdWVLZXldID0geyBjbGlja2VkOiBmYWxzZSwgbGFzdFVwZGF0ZWQ6IGN1cnJlbnREYXRldGltZSB9Ow0KICAgICAgICAgICAgICAgIHNhdmVSb3dEYXRhKHJvd0RhdGEpOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBtYXJrQnV0dG9uID0gcm93LnF1ZXJ5U2VsZWN0b3IoJ3RkLnByaW9yaXR5IGJ1dHRvbicpOw0KICAgICAgICAgICAgaWYgKG1hcmtCdXR0b24pIHsNCiAgICAgICAgICAgICAgICB1cGRhdGVCdXR0b24ocm93LCBtYXJrQnV0dG9uKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGZvcm1hdFVwZGF0ZWRUaW1lKCkgew0KICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpOw0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC51cGRhdGVkIHRpbWVbZGF0ZXRpbWVdJykuZm9yRWFjaCh0aW1lRWxlbWVudCA9PiB7DQogICAgICAgICAgICBpZiAodGltZUVsZW1lbnQudGV4dENvbnRlbnQuaW5jbHVkZXMoJygnKSkgcmV0dXJuOw0KDQogICAgICAgICAgICBjb25zdCBkYXRldGltZSA9IHRpbWVFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0ZXRpbWUnKTsNCiAgICAgICAgICAgIGNvbnN0IFtkYXRlLCB0aW1lXSA9IGRhdGV0aW1lLnNwbGl0KCdUJyk7DQogICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRUaW1lID0gYCR7ZGF0ZX0gJHt0aW1lLnNwbGl0KCcrJylbMF19YDsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVEYXRlID0gbmV3IERhdGUoZGF0ZXRpbWUpOw0KICAgICAgICAgICAgY29uc3QgdGltZURpZmYgPSBNYXRoLmZsb29yKChub3cgLSB0aW1lRGF0ZSkgLyAxMDAwKTsgLy8gVGltZSBkaWZmZXJlbmNlIGluIHNlY29uZHMNCiAgICAgICAgICAgIGxldCBkaXNwbGF5VGltZURpZmYgPSAnJzsNCg0KICAgICAgICAgICAgaWYgKHRpbWVEaWZmIDwgMzYwMCkgeyAvLyBMZXNzIHRoYW4gYW4gaG91cg0KICAgICAgICAgICAgICAgIGRpc3BsYXlUaW1lRGlmZiA9IGAke01hdGguZmxvb3IodGltZURpZmYgLyA2MCl9IOWIhumSn+WJjWA7DQogICAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVEaWZmIDwgODY0MDApIHsgLy8gTGVzcyB0aGFuIGEgZGF5DQogICAgICAgICAgICAgICAgZGlzcGxheVRpbWVEaWZmID0gYCR7TWF0aC5mbG9vcih0aW1lRGlmZiAvIDM2MDApfSDlsI/ml7bliY1gOw0KICAgICAgICAgICAgfSBlbHNlIHsgLy8gTW9yZSB0aGFuIGEgZGF5DQogICAgICAgICAgICAgICAgZGlzcGxheVRpbWVEaWZmID0gYCR7TWF0aC5mbG9vcih0aW1lRGlmZiAvIDg2NDAwKX0g5aSp5YmNYDsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgdGltZUVsZW1lbnQuc2V0QXR0cmlidXRlKCd0aXRsZScsIGAke2Zvcm1hdHRlZFRpbWV9ICgke2Rpc3BsYXlUaW1lRGlmZn0pYCk7DQogICAgICAgICAgICB0aW1lRWxlbWVudC50ZXh0Q29udGVudCA9IGAke2Zvcm1hdHRlZFRpbWV9ICgke2Rpc3BsYXlUaW1lRGlmZn0pYDsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0SXNzdWVLZXkocm93KSB7DQogICAgICAgIGNvbnN0IGlzc3VlS2V5RWxlbWVudCA9IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC5pc3N1ZWtleSBhJyk7DQogICAgICAgIHJldHVybiBpc3N1ZUtleUVsZW1lbnQgPyBpc3N1ZUtleUVsZW1lbnQudGV4dENvbnRlbnQudHJpbSgpIDogbnVsbDsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBjb3B5U3VtbWFyeUNvbnRlbnQocm93KSB7DQogICAgICAgIGNvbnN0IHN1bW1hcnlDZWxsID0gcm93LnF1ZXJ5U2VsZWN0b3IoJ3RkLnN1bW1hcnknKTsNCiAgICAgICAgaWYgKHN1bW1hcnlDZWxsKSB7DQogICAgICAgICAgICBjb25zdCBjb250ZW50ID0gc3VtbWFyeUNlbGwudGV4dENvbnRlbnQudHJpbSgpOw0KICAgICAgICAgICAgY29weVRvQ2xpcGJvYXJkKGNvbnRlbnQpOw0KICAgICAgICAgICAgc2hvd05vdGlmaWNhdGlvbign5YaF5a655bey5aSN5Yi25Yiw5Ymq6LS05p2/IScsICcjMjhhNzQ1Jyk7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBpbml0aWFsaXplQnV0dG9ucygpIHsNCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndHInKS5mb3JFYWNoKHJvdyA9PiB7DQogICAgICAgICAgICBjb25zdCBpc3N1ZUxpbmtzID0gcm93LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuaXNzdWUtbGluaycpOw0KICAgICAgICAgICAgaWYgKGlzc3VlTGlua3MubGVuZ3RoID49IDIpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRMaW5rID0gaXNzdWVMaW5rc1sxXTsNCiAgICAgICAgICAgICAgICBpZiAoc2Vjb25kTGluayAmJiAoIXNlY29uZExpbmsubmV4dFNpYmxpbmcgfHwgc2Vjb25kTGluay5uZXh0U2libGluZy50YWdOYW1lICE9PSAnQlVUVE9OJykpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29weUJ1dHRvbiA9IGNyZWF0ZUNvcHlCdXR0b24oc2Vjb25kTGluaywgcm93KTsNCiAgICAgICAgICAgICAgICAgICAgc2Vjb25kTGluay5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb3B5QnV0dG9uLCBzZWNvbmRMaW5rLm5leHRTaWJsaW5nKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGNvbnN0IGlzc3VlS2V5ID0gZ2V0SXNzdWVLZXkocm93KTsNCiAgICAgICAgICAgIGlmIChpc3N1ZUtleSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5Q2VsbCA9IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC5wcmlvcml0eScpOw0KICAgICAgICAgICAgICAgIGlmIChwcmlvcml0eUNlbGwpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdCdXR0b24gPSBwcmlvcml0eUNlbGwucXVlcnlTZWxlY3RvcignYnV0dG9uJyk7DQogICAgICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdCdXR0b24pIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hcmtCdXR0b24gPSBjcmVhdGVNYXJrQnV0dG9uKHJvdyk7DQogICAgICAgICAgICAgICAgICAgICAgICBwcmlvcml0eUNlbGwuYXBwZW5kQ2hpbGQobWFya0J1dHRvbik7DQogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVSb3cocm93KTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0Um93RGF0YSgpIHsNCiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Jvd0RhdGEnKSkgfHwge307DQogICAgICAgIHJldHVybiBkYXRhOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHNhdmVSb3dEYXRhKGRhdGEpIHsNCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Jvd0RhdGEnLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7DQogICAgfQ0KICAgICAgICAvLyDliJ3lp4vljJblh73mlbANCiAgICBmdW5jdGlvbiBpbml0aWFsaXplTGlua3MoKSB7DQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkLnN1bW1hcnkgYS5pc3N1ZS1saW5rJykuZm9yRWFjaChsaW5rID0+IHsNCiAgICAgICAgICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgICAgICAvLyDlj5bmtojpu5jorqTnmoTngrnlh7vooYzkuLoNCiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgIC8vIOWcqOaWsOmAiemhueWNoeS4reaJk+W8gOmTvuaOpQ0KICAgICAgICAgICAgICAgIHdpbmRvdy5vcGVuKGxpbmsuaHJlZiwgJ19ibGFuaycpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgY29uc3Qgcm93RGF0YSA9IGdldFJvd0RhdGEoKTsNCg0KICAgIGZvcm1hdFVwZGF0ZWRUaW1lKCk7DQogICAgaW5pdGlhbGl6ZUJ1dHRvbnMoKTsNCiAgICBpbml0aWFsaXplTGlua3MoKTsNCg0KICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4gew0KICAgICAgICBmb3JtYXRVcGRhdGVkVGltZSgpOw0KICAgICAgICBpbml0aWFsaXplQnV0dG9ucygpOw0KICAgICAgICB1cGRhdGVDb2x1bW5IZWFkZXJzKCk7DQogICAgICAgIGluaXRpYWxpemVMaW5rcygpOw0KICAgICAgICAvL2luY3JlbWVudENvdW50KCk7DQogICAgICAgIGhpZ2hsaWdodEN1cnJlbnRVc2VyKCk7DQogICAgfSk7DQoNCiAgICBvYnNlcnZlci5vYnNlcnZlKGRvY3VtZW50LmJvZHksIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pOw0KDQogICAgdXBkYXRlQ29sdW1uSGVhZGVycygpOw0KDQogICAgLy8g55uR5ZCs5YWz6ZSu6K+N5Y+Y5YyW5bm25pu05paw6auY5Lqu5pi+56S6DQogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NhbGxTY3JpcHRCJywgKGV2ZW50KSA9PiB7DQogICAgICAgIGhpZ2hsaWdodEN1cnJlbnRVc2VyKCk7DQogICAgfSk7DQp9KSgpOw0KDQo="},{"name":"获取所有图片和视频显示右下角翻页","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"run_in":null,"tags":[],"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["http://jira-ex.transsion.com/browse/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[],"orig_run_in":[],"orig_tags":[]}},"storage":{"ts":1725242041627,"data":{}},"enabled":true,"position":2,"file_url":"https://github.com/Lemou-Memo/jira/raw/main/photo.js","uuid":"873b37c8-0b3a-45f5-a681-3f7343379391","source":"Ly8gPT1Vc2VyU2NyaXB0PT0NCi8vIEBuYW1lICAgICAgICAg6I635Y+W5omA5pyJ5Zu+54mH5ZKM6KeG6aKR5pi+56S65Y+z5LiL6KeS57+76aG1DQovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly90YW1wZXJtb25rZXkubmV0Lw0KLy8gQHZlcnNpb24gICAgICAyLjENCi8vIEBkZXNjcmlwdGlvbiAg6Ieq5Yqo5Zyo5rWP6KeI5Zmo5Lit5pKt5pS+5aqS5L2T6ZO+5o6l77yM5Y+z5LiL6KeS5pi+56S65rWu5Yqo55S75buK77yM5pSv5oyB5YWo5bGP77yM5Zu+5YOP5bGF5Lit5pi+56S6DQovLyBAYXV0aG9yICAgICAgIGppYWxlLnBhbg0KLy8gQG1hdGNoICAgICAgICBodHRwOi8vamlyYS1leC50cmFuc3Npb24uY29tL2Jyb3dzZS8qDQovLyBAaWNvbiAgICAgICAgIGRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBQUFBQUNINUJBRUtBQUVBTEFBQUFBQUJBQUVBQUFJQ1RBRUFPdz09DQovLyBAZ3JhbnQgICAgICAgIG5vbmUNCi8vIEB1cGRhdGVVUkwgICAgaHR0cHM6Ly9naXRodWIuY29tL0xlbW91LU1lbW8vamlyYS9yYXcvbWFpbi9waG90by5qcw0KLy8gQGRvd25sb2FkVVJMICBodHRwczovL2dpdGh1Yi5jb20vTGVtb3UtTWVtby9qaXJhL3Jhdy9tYWluL3Bob3RvLmpzDQovLyA9PS9Vc2VyU2NyaXB0PT0NCihmdW5jdGlvbigpIHsNCiAgICAndXNlIHN0cmljdCc7DQoNCiAgICAvLyDliJvlu7rmta7liqjnlLvlu4rlrrnlmahjZXNoaQ0KICAgIGNvbnN0IGdhbGxlcnlDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLmJvdHRvbSA9ICcyMHB4JzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJzIwcHgnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUud2lkdGggPSAnMzUwcHgnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzYwMHB4JzsgLy8g5aKe5Yqg6auY5bqmDQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMCwgMCwgMCwgMC44KSc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnMTBweCc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuZmxleERpcmVjdGlvbiA9ICdjb2x1bW4nOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLnpJbmRleCA9ICcxMDAwJzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7IC8vIOa3u+WKoOWGhei+uei3nQ0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuYm94U2l6aW5nID0gJ2JvcmRlci1ib3gnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUub3BhY2l0eSA9ICcxJzsgLy8g56Gu5L+d5Yid5aeL6YCP5piO5bqm6K6+572u5Li6MQ0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUudHJhbnNpdGlvbiA9ICdvcGFjaXR5IDAuNXMnOyAvLyDpmpDol48v5pi+56S655qE5bmz5ruR6L+H5rihDQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7IC8vIOWIneWni+eKtuaAgeS4uumakOiXjw0KICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZ2FsbGVyeUNvbnRhaW5lcik7DQoNCiAgICAvLyDliJvlu7rmjInpkq7nmoTpobbpg6jmoI8NCiAgICBjb25zdCB0b3BCYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICB0b3BCYXIuc3R5bGUud2lkdGggPSAnMTAwJSc7DQogICAgdG9wQmFyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJzsNCiAgICB0b3BCYXIuc3R5bGUudG9wID0gJzAnOw0KICAgIHRvcEJhci5zdHlsZS5sZWZ0ID0gJzAnOw0KICAgIHRvcEJhci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgIHRvcEJhci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJzsNCiAgICB0b3BCYXIuc3R5bGUucGFkZGluZyA9ICc1cHgnOw0KICAgIHRvcEJhci5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZCh0b3BCYXIpOw0KDQogICAgLy8g5Yib5bu65LiK5LiA6aG15oyJ6ZKuDQogICAgY29uc3QgcHJldkJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICAgIHByZXZCdXR0b24udGV4dENvbnRlbnQgPSAnPCc7DQogICAgcHJldkJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpJzsNCiAgICBwcmV2QnV0dG9uLnN0eWxlLmJvcmRlciA9ICdub25lJzsNCiAgICBwcmV2QnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJzsNCiAgICBwcmV2QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnOw0KICAgIHByZXZCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOw0KICAgIHByZXZCdXR0b24uc3R5bGUuekluZGV4ID0gJzEwMDEnOyAvLyDnoa7kv53mjInpkq7lnKjmiYDmnInlhYPntKDkuYvkuIoNCiAgICB0b3BCYXIuYXBwZW5kQ2hpbGQocHJldkJ1dHRvbik7DQoNCiAgICAvLyDliJvlu7rlhbPpl63mjInpkq4NCiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICAgIGNsb3NlQnV0dG9uLnRleHRDb250ZW50ID0gJ1gnOw0KICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDI1NSwgMCwgMCwgMC41KSc7DQogICAgY2xvc2VCdXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnOw0KICAgIGNsb3NlQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJzsNCiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JzsNCiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7DQogICAgY2xvc2VCdXR0b24uc3R5bGUuekluZGV4ID0gJzEwMDEnOyAvLyDnoa7kv53mjInpkq7lnKjmiYDmnInlhYPntKDkuYvkuIoNCiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5tYXJnaW4gPSAnMCAxMHB4JzsgLy8g5oyJ6ZKu5LmL6Ze055qE6Ze06LedDQogICAgdG9wQmFyLmFwcGVuZENoaWxkKGNsb3NlQnV0dG9uKTsNCg0KICAgIC8vIOWIm+W7uuS4i+S4gOmhteaMiemSrg0KICAgIGNvbnN0IG5leHRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsNCiAgICBuZXh0QnV0dG9uLnRleHRDb250ZW50ID0gJz4nOw0KICAgIG5leHRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMjU1LCAyNTUsIDI1NSwgMC41KSc7DQogICAgbmV4dEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7DQogICAgbmV4dEJ1dHRvbi5zdHlsZS5jb2xvciA9ICdibGFjayc7DQogICAgbmV4dEJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNXB4JzsNCiAgICBuZXh0QnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsNCiAgICBuZXh0QnV0dG9uLnN0eWxlLnpJbmRleCA9ICcxMDAxJzsgLy8g56Gu5L+d5oyJ6ZKu5Zyo5omA5pyJ5YWD57Sg5LmL5LiKDQogICAgdG9wQmFyLmFwcGVuZENoaWxkKG5leHRCdXR0b24pOw0KDQogICAgLy8g5Yib5bu65aqS5L2T6aG55a655ZmoDQogICAgY29uc3QgbWVkaWFDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICBtZWRpYUNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMDAlJzsNCiAgICBtZWRpYUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7DQogICAgbWVkaWFDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsNCiAgICBtZWRpYUNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7ICAgLy8g5Z6C55u05bGF5LitDQogICAgbWVkaWFDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnY2VudGVyJzsgLy8g5rC05bmz5bGF5LitDQogICAgZ2FsbGVyeUNvbnRhaW5lci5hcHBlbmRDaGlsZChtZWRpYUNvbnRhaW5lcik7DQoNCiAgICAvLyDlrZjlgqjmiYDmnInlqpLkvZPpobkNCiAgICBjb25zdCBtZWRpYUl0ZW1zID0gW107DQogICAgbGV0IGN1cnJlbnRJbmRleCA9IDA7DQoNCiAgICAvLyDmmL7npLrlvZPliY3lqpLkvZPpobnnmoTlh73mlbANCiAgICBmdW5jdGlvbiBzaG93Q3VycmVudE1lZGlhKCkgew0KICAgICAgICBtZWRpYUl0ZW1zLmZvckVhY2goKG1lZGlhLCBpbmRleCkgPT4gew0KICAgICAgICAgICAgbWVkaWEuc3R5bGUuZGlzcGxheSA9IGluZGV4ID09PSBjdXJyZW50SW5kZXggPyAnYmxvY2snIDogJ25vbmUnOw0KICAgICAgICB9KTsNCiAgICB9DQoNCiAgICAvLyDmn6Xmib7pobXpnaLkuIrnmoTmiYDmnInpk77mjqUNCiAgICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2EnKTsNCg0KICAgIGxpbmtzLmZvckVhY2gobGluayA9PiB7DQogICAgICAgIGNvbnN0IGhyZWYgPSBsaW5rLmhyZWYudG9Mb3dlckNhc2UoKTsgIC8vIOi9rOaNouS4uuWwj+WGmeS7peS+v+S6juavlOi+gw0KDQogICAgICAgIC8vIOajgOafpemTvuaOpeaYr+WQpuS4uk1QNOaWh+S7tg0KICAgICAgICBpZiAoaHJlZi5lbmRzV2l0aCgnLm1wNCcpKSB7DQogICAgICAgICAgICAvLyDliJvlu7rop4bpopHlhYPntKANCiAgICAgICAgICAgIGNvbnN0IHZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsNCiAgICAgICAgICAgIHZpZGVvLmNvbnRyb2xzID0gdHJ1ZTsNCiAgICAgICAgICAgIHZpZGVvLnNyYyA9IGhyZWY7DQogICAgICAgICAgICB2aWRlby5zdHlsZS5tYXhXaWR0aCA9ICcxMDAlJzsNCiAgICAgICAgICAgIHZpZGVvLnN0eWxlLm1heEhlaWdodCA9ICcxMDAlJzsNCiAgICAgICAgICAgIHZpZGVvLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsNCiAgICAgICAgICAgIHZpZGVvLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7DQoNCiAgICAgICAgICAgIC8vIOinhumikeeahOWFqOWxj+aUr+aMgQ0KICAgICAgICAgICAgdmlkZW8uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBpZiAodmlkZW8ucmVxdWVzdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgdmlkZW8ucmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHZpZGVvLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7IC8vIFNhZmFyaQ0KICAgICAgICAgICAgICAgICAgICB2aWRlby53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW8ubXNSZXF1ZXN0RnVsbHNjcmVlbikgeyAvLyBJRTExDQogICAgICAgICAgICAgICAgICAgIHZpZGVvLm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgbWVkaWFJdGVtcy5wdXNoKHZpZGVvKTsNCiAgICAgICAgICAgIG1lZGlhQ29udGFpbmVyLmFwcGVuZENoaWxkKHZpZGVvKTsNCiAgICAgICAgfQ0KICAgICAgICAvLyDmo4Dmn6Xpk77mjqXmmK/lkKbkuLrlm77niYfmlofku7bvvIhQTkcsIEpQRywgSlBFRywgV0VCUO+8iQ0KICAgICAgICBlbHNlIGlmIChocmVmLmVuZHNXaXRoKCcucG5nJykgfHwgaHJlZi5lbmRzV2l0aCgnLmpwZycpIHx8IGhyZWYuZW5kc1dpdGgoJy5qcGVnJykgfHwgaHJlZi5lbmRzV2l0aCgnLndlYnAnKSkgew0KICAgICAgICAgICAgLy8g5Yib5bu65Zu+54mH5YWD57SgDQogICAgICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTsNCiAgICAgICAgICAgIGltZy5zcmMgPSBocmVmOw0KICAgICAgICAgICAgaW1nLnN0eWxlLm1heFdpZHRoID0gJzEwMCUnOw0KICAgICAgICAgICAgaW1nLnN0eWxlLm1heEhlaWdodCA9ICcxMDAlJzsNCiAgICAgICAgICAgIGltZy5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7DQogICAgICAgICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgICAgICAgICAgLy8g5re75Yqg5YWo5bGP5pSv5oyB55qE5LqL5Lu255uR5ZCs5ZmoDQogICAgICAgICAgICBpbWcuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4gew0KICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICBpZiAoaW1nLnJlcXVlc3RGdWxsc2NyZWVuKSB7DQogICAgICAgICAgICAgICAgICAgIGltZy5yZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW1nLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKSB7IC8vIFNhZmFyaQ0KICAgICAgICAgICAgICAgICAgICBpbWcud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGltZy5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7IC8vIElFMTENCiAgICAgICAgICAgICAgICAgICAgaW1nLm1zUmVxdWVzdEZ1bGxzY3JlZW4oKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgbWVkaWFJdGVtcy5wdXNoKGltZyk7DQogICAgICAgICAgICBtZWRpYUNvbnRhaW5lci5hcHBlbmRDaGlsZChpbWcpOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAvLyDlpoLmnpzmnInlqpLkvZPpobnliJnmmL7npLrnlLvlu4oNCiAgICBpZiAobWVkaWFJdGVtcy5sZW5ndGggPiAwKSB7DQogICAgICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsgLy8g5L2/55S75buK5Y+v6KeBDQogICAgICAgIHNob3dDdXJyZW50TWVkaWEoKTsgLy8g5pi+56S656ys5LiA5Liq5aqS5L2T6aG5DQogICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5aaC5p6c5rKh5pyJ5om+5Yiw5aqS5L2T6aG577yM5YiZ6ZqQ6JeP55S75buK5a655ZmoDQogICAgICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCiAgICB9DQoNCiAgICAvLyDkuLrmjInpkq7mt7vliqDkuovku7bnm5HlkKzlmagNCiAgICBwcmV2QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICBpZiAobWVkaWFJdGVtcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBjdXJyZW50SW5kZXggPSAoY3VycmVudEluZGV4ID4gMCkgPyBjdXJyZW50SW5kZXggLSAxIDogbWVkaWFJdGVtcy5sZW5ndGggLSAxOw0KICAgICAgICAgICAgc2hvd0N1cnJlbnRNZWRpYSgpOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICBpZiAobWVkaWFJdGVtcy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgICBjdXJyZW50SW5kZXggPSAoY3VycmVudEluZGV4IDwgbWVkaWFJdGVtcy5sZW5ndGggLSAxKSA/IGN1cnJlbnRJbmRleCArIDEgOiAwOw0KICAgICAgICAgICAgc2hvd0N1cnJlbnRNZWRpYSgpOw0KICAgICAgICB9DQogICAgfSk7DQoNCiAgICAvLyDkuLrlhbPpl63mjInpkq7mt7vliqDkuovku7bnm5HlkKzlmagNCiAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsNCiAgICAgICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7IC8vIOmakOiXj+eUu+W7ig0KDQogICAgICAgIC8vIOWBnOatouaJgOacieinhumikeaSreaUvuW5tumdmemfsw0KICAgICAgICBtZWRpYUl0ZW1zLmZvckVhY2gobWVkaWEgPT4gew0KICAgICAgICAgICAgaWYgKG1lZGlhLnRhZ05hbWUgPT09ICdWSURFTycpIHsNCiAgICAgICAgICAgICAgICBtZWRpYS5wYXVzZSgpOyAvLyDmmoLlgZzop4bpopENCiAgICAgICAgICAgICAgICBtZWRpYS5jdXJyZW50VGltZSA9IDA7IC8vIOmHjee9ruaSreaUvuaXtumXtA0KICAgICAgICAgICAgICAgIG1lZGlhLnZvbHVtZSA9IDA7IC8vIOmdmemfsw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9KTsNCn0pKCk7DQo="}]}