{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Jira功能拓展优化整合版","options":{"check_for_updates":true,"user_modified":null,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":true,"unwrap":null,"run_at":null,"tab_types":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["http://jira-ex.transsion.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_run_in":[]},"run_in":null,"tags":[]},"storage":{"ts":1726799516795,"data":{}},"enabled":true,"position":1,"file_url":"https://raw.githubusercontent.com/Lemou-Memo/jira/main/Jira%20Functionality%20Enhancement%20and%20Integration.js","uuid":"45ae6473-1ec7-49df-b5d9-56a6219eefdb","source":"Ly8gPT1Vc2VyU2NyaXB0PT0NCi8vIEBuYW1lICAgICAgICAgSmlyYeWKn+iDveaLk+WxleS8mOWMluaVtOWQiOeJiA0KLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vdGFtcGVybW9ua2V5Lm5ldC8NCi8vIEB2ZXJzaW9uICAgICAgMi4yDQovLyBAZGVzY3JpcHRpb24gIOWFs+mUruivjemrmOS6ruOAgeW9k+WJjeeUqOaIt+WKoOeyl+OAgeWkjeWItuaMiemSruOAgWJ1Z+aPkOekuuaMiemSruOAgeaXtumXtOaYvuekuuS8mOWMluetieWKn+iDveeahOaVtOWQiA0KLy8gQGF1dGhvciAgICAgICBqaWFsZS5wYW4NCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL2ppcmEtZXgudHJhbnNzaW9uLmNvbS8qDQovLyBAZ3JhbnQgICAgICAgIG5vbmUNCi8vIEB1cGRhdGVVUkwgICAgaHR0cHM6Ly9naXRodWIuY29tL0xlbW91LU1lbW8vamlyYS9yYXcvcmVmcy9oZWFkcy9tYWluL2ppcmFfZmlyZWZveA0KLy8gQGRvd25sb2FkVVJMICBodHRwczovL2dpdGh1Yi5jb20vTGVtb3UtTWVtby9qaXJhL3Jhdy9yZWZzL2hlYWRzL21haW4vamlyYV9maXJlZm94DQovLyA9PS9Vc2VyU2NyaXB0PT0NCg0KKGZ1bmN0aW9uKCkgew0KICAgICd1c2Ugc3RyaWN0JzsNCg0KICAgIC8vID095YWz6ZSu6K+N6auY5Lqu5ZKM5b2T5YmN55So5oi35Yqg57KX6YOo5YiGPT0NCiAgICBsZXQga2V5d29yZHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdoaWdobGlnaHRlZEtleXdvcmRzJykpIHx8IFsi5qCH5YeG5YyWIiwgIuS4ieaWuSIsICLnsonkuJ0iXTsNCiAgICBjb25zdCBlZmZlY3RTdHlsZSA9IGANCiAgICAgICAgLmhpZ2hsaWdodGVkLWtleXdvcmQgew0KICAgICAgICAgICAgY29sb3I6ICMwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOw0KICAgICAgICB9DQogICAgICAgIC5jdXJyZW50LXVzZXIgew0KICAgICAgICAgICAgY29sb3I6ICMwMDgwMDA7DQogICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsNCiAgICAgICAgfQ0KICAgICAgICAuZmxvYXRpbmctcGFuZWwgew0KICAgICAgICAgICAgZGlzcGxheTogbm9uZTsNCiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsNCiAgICAgICAgICAgIGJvdHRvbTogODBweDsNCiAgICAgICAgICAgIGxlZnQ6IDIwcHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA4cHg7DQogICAgICAgICAgICBwYWRkaW5nOiAxMHB4Ow0KICAgICAgICAgICAgd2lkdGg6IDI1MHB4Ow0KICAgICAgICAgICAgYm94LXNoYWRvdzogMHB4IDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjIpOw0KICAgICAgICAgICAgei1pbmRleDogMTAwMDA7DQogICAgICAgIH0NCiAgICAgICAgLmZsb2F0aW5nLXBhbmVsIGlucHV0IHsNCiAgICAgICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSA2MHB4KTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDVweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgICB9DQogICAgICAgIC5mbG9hdGluZy1wYW5lbCBidXR0b24gew0KICAgICAgICAgICAgd2lkdGg6IDQwcHg7DQogICAgICAgICAgICBwYWRkaW5nOiA1cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOw0KICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgYm9yZGVyOiBub25lOw0KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4Ow0KICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICB9DQogICAgICAgIC5rZXl3b3JkLWl0ZW0gew0KICAgICAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDsNCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7DQogICAgICAgIH0NCiAgICAgICAgLmtleXdvcmQtaXRlbSBzcGFuIHsNCiAgICAgICAgICAgIGZsZXgtZ3JvdzogMTsNCiAgICAgICAgfQ0KICAgICAgICAua2V5d29yZC1pdGVtIC5kZWxldGUtYnRuIHsNCiAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4Ow0KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2RjMzU0NTsNCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsNCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDJweCA1cHg7DQogICAgICAgIH0NCiAgICAgICAgLnRvZ2dsZS1idXR0b24gew0KICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOw0KICAgICAgICAgICAgYm90dG9tOiAyMHB4Ow0KICAgICAgICAgICAgbGVmdDogMjBweDsNCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7DQogICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7DQogICAgICAgICAgICB3aWR0aDogNTBweDsNCiAgICAgICAgICAgIGhlaWdodDogNTBweDsNCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICAgIHotaW5kZXg6IDEwMDAwOw0KICAgICAgICB9DQogICAgYDsNCiAgICBjb25zdCBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic3R5bGUiKTsNCiAgICBzdHlsZVNoZWV0LnR5cGUgPSAidGV4dC9jc3MiOw0KICAgIHN0eWxlU2hlZXQuaW5uZXJUZXh0ID0gZWZmZWN0U3R5bGU7DQogICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZVNoZWV0KTsNCg0KICAgIGZ1bmN0aW9uIGhpZ2hsaWdodFRleHQobm9kZSkgew0KICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMykgew0KICAgICAgICAgICAgbGV0IHRleHQgPSBub2RlLm5vZGVWYWx1ZTsNCiAgICAgICAgICAgIGxldCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7DQogICAgICAgICAgICBsZXQgbW9kaWZpZWRUZXh0ID0gdGV4dDsNCg0KICAgICAgICAgICAgZm9yIChsZXQga2V5d29yZCBvZiBrZXl3b3Jkcykgew0KICAgICAgICAgICAgICAgIGxldCByZWdleCA9IG5ldyBSZWdFeHAoYCgke2tleXdvcmR9KWAsICJnaSIpOw0KICAgICAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KG1vZGlmaWVkVGV4dCkpIHsNCiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWRUZXh0ID0gbW9kaWZpZWRUZXh0LnJlcGxhY2UocmVnZXgsIGA8c3BhbiBjbGFzcz0iaGlnaGxpZ2h0ZWQta2V5d29yZCIgZGF0YS1rZXl3b3JkPSIke2tleXdvcmR9Ij4kMTwvc3Bhbj5gKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGlmIChtb2RpZmllZFRleHQgIT09IHRleHQpIHsNCiAgICAgICAgICAgICAgICBsZXQgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsNCiAgICAgICAgICAgICAgICBzcGFuLmlubmVySFRNTCA9IG1vZGlmaWVkVGV4dDsNCiAgICAgICAgICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKHNwYW4sIG5vZGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEgJiYgbm9kZS5jaGlsZE5vZGVzKSB7DQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICAgIGhpZ2hsaWdodFRleHQobm9kZS5jaGlsZE5vZGVzW2ldKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNsZWFySGlnaGxpZ2h0cygpIHsNCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhpZ2hsaWdodGVkLWtleXdvcmQnKS5mb3JFYWNoKGVsZW1lbnQgPT4gew0KICAgICAgICAgICAgY29uc3QgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlbGVtZW50LmlubmVyVGV4dCk7DQogICAgICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKHRleHROb2RlLCBlbGVtZW50KTsNCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZ2V0Q3VycmVudFVzZXIoKSB7DQogICAgICAgIGNvbnN0IHVzZXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hlYWRlci1kZXRhaWxzLXVzZXItZnVsbG5hbWUnKTsNCiAgICAgICAgcmV0dXJuIHVzZXJFbGVtZW50ID8gdXNlckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXVzZXJuYW1lJykgOiBudWxsOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhpZ2hsaWdodEN1cnJlbnRVc2VyKCkgew0KICAgICAgICBjb25zdCBjdXJyZW50VXNlcm5hbWUgPSBnZXRDdXJyZW50VXNlcigpOw0KICAgICAgICBpZiAoY3VycmVudFVzZXJuYW1lKSB7DQogICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5hc3NpZ25lZSBhLnVzZXItaG92ZXIsIHRkLnJlcG9ydGVyIGEudXNlci1ob3ZlcicpLmZvckVhY2godXNlckxpbmsgPT4gew0KICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlckxpbmsuZ2V0QXR0cmlidXRlKCdyZWwnKTsNCiAgICAgICAgICAgICAgICBpZiAodXNlcm5hbWUgPT09IGN1cnJlbnRVc2VybmFtZSkgew0KICAgICAgICAgICAgICAgICAgICB1c2VyTGluay5jbGFzc0xpc3QuYWRkKCdjdXJyZW50LXVzZXInKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAgICAgICAgfQ0KICAgIH0NCiAgICBoaWdobGlnaHRDdXJyZW50VXNlcigpOw0KICAgIC8vIGZ1bmN0aW9uIHVwZGF0ZUhpZ2hsaWdodHMoKSB7DQogICAgLy8gICAgIGNsZWFySGlnaGxpZ2h0cygpOw0KICAgIC8vICAgICBoaWdobGlnaHRUZXh0KGRvY3VtZW50LmJvZHkpOw0KICAgIC8vIH0NCiAgICAvLyB1cGRhdGVIaWdobGlnaHRzKCk7DQoNCiAgICAvLyBjb25zdCBmbG9hdGluZ1BhbmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7DQogICAgLy8gZmxvYXRpbmdQYW5lbC5jbGFzc05hbWUgPSAiZmxvYXRpbmctcGFuZWwiOw0KICAgIC8vIGZsb2F0aW5nUGFuZWwuaW5uZXJIVE1MID0gYA0KICAgIC8vICAgICA8aW5wdXQgdHlwZT0idGV4dCIgaWQ9Im5ld0tleXdvcmQiIHBsYWNlaG9sZGVyPSLmt7vliqDlhbPplK7or40iIC8+DQogICAgLy8gICAgIDxidXR0b24gaWQ9ImFkZEtleXdvcmQiPis8L2J1dHRvbj4NCiAgICAvLyAgICAgPGRpdiBpZD0ia2V5d29yZExpc3QiPjwvZGl2Pg0KICAgIC8vIGA7DQogICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChmbG9hdGluZ1BhbmVsKTsNCg0KICAgIC8vIGNvbnN0IHRvZ2dsZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImJ1dHRvbiIpOw0KICAgIC8vIHRvZ2dsZUJ1dHRvbi5jbGFzc05hbWUgPSAidG9nZ2xlLWJ1dHRvbiI7DQogICAgLy8gdG9nZ2xlQnV0dG9uLnRleHRDb250ZW50ID0gIuKYsCI7DQogICAgLy8gZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0b2dnbGVCdXR0b24pOw0KDQogICAgLy8gdG9nZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7DQogICAgLy8gICAgIGZsb2F0aW5nUGFuZWwuc3R5bGUuZGlzcGxheSA9IGZsb2F0aW5nUGFuZWwuc3R5bGUuZGlzcGxheSA9PT0gIm5vbmUiIHx8ICFmbG9hdGluZ1BhbmVsLnN0eWxlLmRpc3BsYXkgPyAiYmxvY2siIDogIm5vbmUiOw0KICAgIC8vICAgICByZW5kZXJLZXl3b3JkTGlzdCgpOw0KICAgIC8vIH0pOw0KDQogICAgLy8gZnVuY3Rpb24gcmVuZGVyS2V5d29yZExpc3QoKSB7DQogICAgLy8gICAgIGNvbnN0IGtleXdvcmRMaXN0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImtleXdvcmRMaXN0Iik7DQogICAgLy8gICAgIGtleXdvcmRMaXN0RGl2LmlubmVySFRNTCA9ICIiOw0KDQogICAgLy8gICAgIGtleXdvcmRzLmZvckVhY2goKGtleXdvcmQsIGluZGV4KSA9PiB7DQogICAgLy8gICAgICAgICBjb25zdCBrZXl3b3JkSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOw0KICAgIC8vICAgICAgICAga2V5d29yZEl0ZW0uY2xhc3NOYW1lID0gImtleXdvcmQtaXRlbSI7DQogICAgLy8gICAgICAgICBrZXl3b3JkSXRlbS5pbm5lckhUTUwgPSBgDQogICAgLy8gICAgICAgICAgICAgPHNwYW4+JHtrZXl3b3JkfTwvc3Bhbj4NCiAgICAvLyAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPSJkZWxldGUtYnRuIiBkYXRhLWluZGV4PSIke2luZGV4fSI+5Yig6ZmkPC9idXR0b24+DQogICAgLy8gICAgICAgICBgOw0KICAgIC8vICAgICAgICAga2V5d29yZExpc3REaXYuYXBwZW5kQ2hpbGQoa2V5d29yZEl0ZW0pOw0KICAgIC8vICAgICB9KTsNCg0KICAgIC8vICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuZGVsZXRlLWJ0biIpLmZvckVhY2goYnV0dG9uID0+IHsNCiAgICAvLyAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uKCkgew0KICAgIC8vICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXRBdHRyaWJ1dGUoImRhdGEtaW5kZXgiKTsNCiAgICAvLyAgICAgICAgICAgICBrZXl3b3Jkcy5zcGxpY2UoaW5kZXgsIDEpOw0KICAgIC8vICAgICAgICAgICAgIHNhdmVLZXl3b3JkcygpOw0KICAgIC8vICAgICAgICAgICAgIHVwZGF0ZUhpZ2hsaWdodHMoKTsNCiAgICAvLyAgICAgICAgICAgICByZW5kZXJLZXl3b3JkTGlzdCgpOw0KICAgIC8vICAgICAgICAgfSk7DQogICAgLy8gICAgIH0pOw0KICAgIC8vIH0NCg0KICAgIC8vIGZ1bmN0aW9uIHNhdmVLZXl3b3JkcygpIHsNCiAgICAvLyAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2hpZ2hsaWdodGVkS2V5d29yZHMnLCBKU09OLnN0cmluZ2lmeShrZXl3b3JkcykpOw0KICAgIC8vIH0NCg0KICAgIC8vIGZ1bmN0aW9uIGNoZWNrS2V5d29yZENvbnRhaW5tZW50KG5ld0tleXdvcmQpIHsNCiAgICAvLyAgICAgZm9yIChsZXQga2V5d29yZCBvZiBrZXl3b3Jkcykgew0KICAgIC8vICAgICAgICAgaWYgKGtleXdvcmQuaW5jbHVkZXMobmV3S2V5d29yZCkgfHwgbmV3S2V5d29yZC5pbmNsdWRlcyhrZXl3b3JkKSkgew0KICAgIC8vICAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgIC8vICAgICAgICAgfQ0KICAgIC8vICAgICB9DQogICAgLy8gICAgIHJldHVybiBmYWxzZTsNCiAgICAvLyB9DQoNCiAgICAvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkS2V5d29yZCIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24oKSB7DQogICAgLy8gICAgIGNvbnN0IG5ld0tleXdvcmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmV3S2V5d29yZCIpLnZhbHVlLnRyaW0oKTsNCiAgICAvLyAgICAgaWYgKG5ld0tleXdvcmQgJiYgIWtleXdvcmRzLmluY2x1ZGVzKG5ld0tleXdvcmQpKSB7DQogICAgLy8gICAgICAgICBpZiAoIWNoZWNrS2V5d29yZENvbnRhaW5tZW50KG5ld0tleXdvcmQpKSB7DQogICAgLy8gICAgICAgICAgICAga2V5d29yZHMucHVzaChuZXdLZXl3b3JkKTsNCiAgICAvLyAgICAgICAgICAgICBzYXZlS2V5d29yZHMoKTsNCiAgICAvLyAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmV3S2V5d29yZCIpLnZhbHVlID0gIiI7DQogICAgLy8gICAgICAgICAgICAgdXBkYXRlSGlnaGxpZ2h0cygpOw0KICAgIC8vICAgICAgICAgICAgIHJlbmRlcktleXdvcmRMaXN0KCk7DQogICAgLy8gICAgICAgICB9IGVsc2Ugew0KICAgIC8vICAgICAgICAgICAgIGFsZXJ0KCLlhbPplK7or43kuI7njrDmnInlhbPplK7or43lrZjlnKjljIXlkKvlhbPns7vvvIzml6Dms5Xmt7vliqDvvIEiKTsNCiAgICAvLyAgICAgICAgIH0NCiAgICAvLyAgICAgfSBlbHNlIGlmIChrZXl3b3Jkcy5pbmNsdWRlcyhuZXdLZXl3b3JkKSkgew0KICAgIC8vICAgICAgICAgYWxlcnQoIuWFs+mUruivjeW3suWtmOWcqO+8gSIpOw0KICAgIC8vICAgICB9DQogICAgLy8gfSk7DQogICAgLy8gcmVuZGVyS2V5d29yZExpc3QoKTsNCg0KICAgIC8vID09SmlyYeWKn+iDveaLk+WxlemDqOWIhj09DQogICAgZnVuY3Rpb24gY3JlYXRlQ29weUJ1dHRvbihhbmNob3IsIHJvdykgew0KICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsNCiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ+WkjeWItumTvuaOpSc7DQogICAgICAgIE9iamVjdC5hc3NpZ24oYnV0dG9uLnN0eWxlLCB7DQogICAgICAgICAgICBtYXJnaW5MZWZ0OiAnNXB4JywNCiAgICAgICAgICAgIGZvbnRTaXplOiAnMTJweCcsDQogICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDA3YmZmJywNCiAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLA0KICAgICAgICAgICAgYm9yZGVyOiAnbm9uZScsDQogICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc0cHgnLA0KICAgICAgICAgICAgcGFkZGluZzogJzJweCA1cHgnLA0KICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicNCiAgICAgICAgfSk7DQoNCiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gY29weVRvQ2xpcGJvYXJkKGFuY2hvci5ocmVmKSk7DQogICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdkYmxjbGljaycsICgpID0+IGNvcHlTdW1tYXJ5Q29udGVudChyb3cpKTsNCg0KICAgICAgICByZXR1cm4gYnV0dG9uOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGNvcHlUb0NsaXBib2FyZCh0ZXh0KSB7DQogICAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7DQogICAgICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KQ0KICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHNob3dOb3RpZmljYXRpb24oJ+mTvuaOpeW3suWkjeWItuWIsOWJqui0tOadvyEnLCAnIzI4YTc0NScpKQ0KICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gc2hvd05vdGlmaWNhdGlvbign5aSN5Yi26ZO+5o6l5aSx6LSlOiAnICsgZXJyLCAnI2RjMzU0NScpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZhbGxiYWNrQ29weVRvQ2xpcGJvYXJkKHRleHQpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gZmFsbGJhY2tDb3B5VG9DbGlwYm9hcmQodGV4dCkgew0KICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7DQogICAgICAgIHRleHRBcmVhLnZhbHVlID0gdGV4dDsNCiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSk7DQogICAgICAgIHRleHRBcmVhLnNlbGVjdCgpOw0KICAgICAgICB0cnkgew0KICAgICAgICAgICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKTsNCiAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ+mTvuaOpeW3suWkjeWItuWIsOWJqui0tOadvyEnLCAnIzI4YTc0NScpOw0KICAgICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ+WkjeWItumTvuaOpeWksei0pTogJyArIGVyciwgJyNkYzM1NDUnKTsNCiAgICAgICAgfQ0KICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHRleHRBcmVhKTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzaG93Tm90aWZpY2F0aW9uKG1lc3NhZ2UsIGJhY2tncm91bmRDb2xvcikgew0KICAgICAgICBjb25zdCBub3RpZmljYXRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgbm90aWZpY2F0aW9uLnRleHRDb250ZW50ID0gbWVzc2FnZTsNCiAgICAgICAgT2JqZWN0LmFzc2lnbihub3RpZmljYXRpb24uc3R5bGUsIHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLA0KICAgICAgICAgICAgYm90dG9tOiAnMTBweCcsDQogICAgICAgICAgICByaWdodDogJzEwcHgnLA0KICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBiYWNrZ3JvdW5kQ29sb3IsDQogICAgICAgICAgICBjb2xvcjogJ3doaXRlJywNCiAgICAgICAgICAgIHBhZGRpbmc6ICcxMHB4JywNCiAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzVweCcsDQogICAgICAgICAgICB6SW5kZXg6ICcxMDAwMCcNCiAgICAgICAgfSk7DQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQobm90aWZpY2F0aW9uKTsNCiAgICAgICAgc2V0VGltZW91dCgoKSA9PiBub3RpZmljYXRpb24ucmVtb3ZlKCksIDIwMDApOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZUNvbHVtbkhlYWRlcnMoKSB7DQogICAgICAgIGNvbnN0IGhlYWRlcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0aC5jb2xIZWFkZXJMaW5rIHNwYW4nKTsNCiAgICAgICAgaGVhZGVycy5mb3JFYWNoKHNwYW4gPT4gew0KICAgICAgICAgICAgc3dpdGNoIChzcGFuLnRleHRDb250ZW50KSB7DQogICAgICAgICAgICAgICAgY2FzZSAn5YWz6ZSu5a2XJzoNCiAgICAgICAgICAgICAgICAgICAgc3Bhbi50ZXh0Q29udGVudCA9ICflhbPplK7lrZco54K55Ye75pys6aG16Z2i6Lez6L2sKSc7DQogICAgICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgIGNhc2UgJ+amguimgSc6DQogICAgICAgICAgICAgICAgICAgIHNwYW4udGV4dENvbnRlbnQgPSAn5qaC6KaBKOeCueWHu+aWsOW7uumhtemdoui3s+i9rCknOw0KICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY3JlYXRlTWFya0J1dHRvbihyb3cpIHsNCiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7DQogICAgICAgIE9iamVjdC5hc3NpZ24oYnV0dG9uLnN0eWxlLCB7DQogICAgICAgICAgICBmb250U2l6ZTogJzEycHgnLA0KICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzM0M2E0MCcsDQogICAgICAgICAgICBjb2xvcjogJ3doaXRlJywNCiAgICAgICAgICAgIGJvcmRlcjogJ25vbmUnLA0KICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JywNCiAgICAgICAgICAgIHBhZGRpbmc6ICcycHggNXB4JywNCiAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLA0KICAgICAgICAgICAgbWFyZ2luTGVmdDogJzVweCcNCiAgICAgICAgfSk7DQoNCiAgICAgICAgdXBkYXRlQnV0dG9uKHJvdywgYnV0dG9uKTsNCg0KICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHsNCiAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOw0KICAgICAgICAgICAgaGFuZGxlQ2xpY2socm93KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2RibGNsaWNrJywgKGV2ZW50KSA9PiB7DQogICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTsNCiAgICAgICAgICAgIGhhbmRsZURvdWJsZUNsaWNrKGJ1dHRvbiwgcm93KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgcmV0dXJuIGJ1dHRvbjsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiB1cGRhdGVCdXR0b24ocm93LCBidXR0b24pIHsNCiAgICAgICAgY29uc3QgdGltZUVsZW1lbnQgPSByb3cucXVlcnlTZWxlY3RvcigndGQudXBkYXRlZCB0aW1lJyk7DQogICAgICAgIGNvbnN0IGN1cnJlbnREYXRldGltZSA9IHRpbWVFbGVtZW50ID8gdGltZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRldGltZScpIDogbnVsbDsNCiAgICAgICAgY29uc3QgaXNzdWVLZXkgPSBnZXRJc3N1ZUtleShyb3cpOw0KICAgICAgICBjb25zdCBzdG9yZWREYXRhID0gcm93RGF0YVtpc3N1ZUtleV07DQogICAgICAgIGlmIChzdG9yZWREYXRhKSB7DQogICAgICAgICAgICBidXR0b24udGV4dENvbnRlbnQgPSBzdG9yZWREYXRhLmNsaWNrZWQgPyAn5bey5aSE55CGJyA6ICfmnKrlpITnkIYnOw0KICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHN0b3JlZERhdGEuY2xpY2tlZCA/ICcjMjhhNzQ1JyA6ICcjMzQzYTQwJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfmnKrlpITnkIYnOw0KICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMzQzYTQwJzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhbmRsZUNsaWNrKHJvdykgew0KICAgICAgICBjb25zdCBpc3N1ZUtleSA9IGdldElzc3VlS2V5KHJvdyk7DQogICAgICAgIGlmIChyb3dEYXRhW2lzc3VlS2V5XT8uY2xpY2tlZCkgcmV0dXJuOw0KDQogICAgICAgIHJvd0RhdGFbaXNzdWVLZXldID0gew0KICAgICAgICAgICAgY2xpY2tlZDogdHJ1ZSwNCiAgICAgICAgICAgIGxhc3RVcGRhdGVkOiByb3cucXVlcnlTZWxlY3RvcigndGQudXBkYXRlZCB0aW1lJykuZ2V0QXR0cmlidXRlKCdkYXRldGltZScpDQogICAgICAgIH07DQogICAgICAgIHNhdmVSb3dEYXRhKHJvd0RhdGEpOw0KICAgICAgICB1cGRhdGVSb3cocm93KTsgLy8gRW5zdXJlIHRoZSBidXR0b24gc3RhdGUgaXMgdXBkYXRlZCBpbW1lZGlhdGVseSBhZnRlciBjbGljaw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGhhbmRsZURvdWJsZUNsaWNrKGJ1dHRvbiwgcm93KSB7DQogICAgICAgIGNvbnN0IGlzc3VlS2V5ID0gZ2V0SXNzdWVLZXkocm93KTsNCiAgICAgICAgaWYgKHJvd0RhdGFbaXNzdWVLZXldPy5jbGlja2VkKSB7DQogICAgICAgICAgICBkZWxldGUgcm93RGF0YVtpc3N1ZUtleV07DQogICAgICAgICAgICBzYXZlUm93RGF0YShyb3dEYXRhKTsNCiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfmnKrlpITnkIYnOw0KICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMzQzYTQwJzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIHVwZGF0ZVJvdyhyb3cpIHsNCiAgICAgICAgY29uc3QgdGltZUVsZW1lbnQgPSByb3cucXVlcnlTZWxlY3RvcigndGQudXBkYXRlZCB0aW1lJyk7DQogICAgICAgIGlmICh0aW1lRWxlbWVudCkgew0KICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGV0aW1lID0gdGltZUVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRldGltZScpOw0KICAgICAgICAgICAgY29uc3QgaXNzdWVLZXkgPSBnZXRJc3N1ZUtleShyb3cpOw0KICAgICAgICAgICAgY29uc3Qgc3RvcmVkRGF0YSA9IHJvd0RhdGFbaXNzdWVLZXldOw0KDQogICAgICAgICAgICBpZiAoc3RvcmVkRGF0YSAmJiBzdG9yZWREYXRhLmxhc3RVcGRhdGVkICE9PSBjdXJyZW50RGF0ZXRpbWUpIHsNCiAgICAgICAgICAgICAgICByb3dEYXRhW2lzc3VlS2V5XSA9IHsgY2xpY2tlZDogZmFsc2UsIGxhc3RVcGRhdGVkOiBjdXJyZW50RGF0ZXRpbWUgfTsNCiAgICAgICAgICAgICAgICBzYXZlUm93RGF0YShyb3dEYXRhKTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgY29uc3QgbWFya0J1dHRvbiA9IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC5wcmlvcml0eSBidXR0b24nKTsNCiAgICAgICAgICAgIGlmIChtYXJrQnV0dG9uKSB7DQogICAgICAgICAgICAgICAgdXBkYXRlQnV0dG9uKHJvdywgbWFya0J1dHRvbik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBmdW5jdGlvbiBmb3JtYXRVcGRhdGVkVGltZSgpIHsNCiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTsNCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgndGQudXBkYXRlZCB0aW1lW2RhdGV0aW1lXScpLmZvckVhY2godGltZUVsZW1lbnQgPT4gew0KICAgICAgICAgICAgaWYgKHRpbWVFbGVtZW50LnRleHRDb250ZW50LmluY2x1ZGVzKCcoJykpIHJldHVybjsNCg0KICAgICAgICAgICAgY29uc3QgZGF0ZXRpbWUgPSB0aW1lRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGV0aW1lJyk7DQogICAgICAgICAgICBjb25zdCBbZGF0ZSwgdGltZV0gPSBkYXRldGltZS5zcGxpdCgnVCcpOw0KICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkVGltZSA9IGAke2RhdGV9ICR7dGltZS5zcGxpdCgnKycpWzBdfWA7DQogICAgICAgICAgICBjb25zdCB0aW1lRGF0ZSA9IG5ldyBEYXRlKGRhdGV0aW1lKTsNCiAgICAgICAgICAgIGNvbnN0IHRpbWVEaWZmID0gTWF0aC5mbG9vcigobm93IC0gdGltZURhdGUpIC8gMTAwMCk7IC8vIFRpbWUgZGlmZmVyZW5jZSBpbiBzZWNvbmRzDQogICAgICAgICAgICBsZXQgZGlzcGxheVRpbWVEaWZmID0gJyc7DQoNCiAgICAgICAgICAgIGlmICh0aW1lRGlmZiA8IDM2MDApIHsgLy8gTGVzcyB0aGFuIGFuIGhvdXINCiAgICAgICAgICAgICAgICBkaXNwbGF5VGltZURpZmYgPSBgJHtNYXRoLmZsb29yKHRpbWVEaWZmIC8gNjApfSDliIbpkp/liY1gOw0KICAgICAgICAgICAgfSBlbHNlIGlmICh0aW1lRGlmZiA8IDg2NDAwKSB7IC8vIExlc3MgdGhhbiBhIGRheQ0KICAgICAgICAgICAgICAgIGRpc3BsYXlUaW1lRGlmZiA9IGAke01hdGguZmxvb3IodGltZURpZmYgLyAzNjAwKX0g5bCP5pe25YmNYDsNCiAgICAgICAgICAgIH0gZWxzZSB7IC8vIE1vcmUgdGhhbiBhIGRheQ0KICAgICAgICAgICAgICAgIGRpc3BsYXlUaW1lRGlmZiA9IGAke01hdGguZmxvb3IodGltZURpZmYgLyA4NjQwMCl9IOWkqeWJjWA7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIHRpbWVFbGVtZW50LnNldEF0dHJpYnV0ZSgndGl0bGUnLCBgJHtmb3JtYXR0ZWRUaW1lfSAoJHtkaXNwbGF5VGltZURpZmZ9KWApOw0KICAgICAgICAgICAgdGltZUVsZW1lbnQudGV4dENvbnRlbnQgPSBgJHtmb3JtYXR0ZWRUaW1lfSAoJHtkaXNwbGF5VGltZURpZmZ9KWA7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldElzc3VlS2V5KHJvdykgew0KICAgICAgICBjb25zdCBpc3N1ZUtleUVsZW1lbnQgPSByb3cucXVlcnlTZWxlY3RvcigndGQuaXNzdWVrZXkgYScpOw0KICAgICAgICByZXR1cm4gaXNzdWVLZXlFbGVtZW50ID8gaXNzdWVLZXlFbGVtZW50LnRleHRDb250ZW50LnRyaW0oKSA6IG51bGw7DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY29weVN1bW1hcnlDb250ZW50KHJvdykgew0KICAgICAgICBjb25zdCBzdW1tYXJ5Q2VsbCA9IHJvdy5xdWVyeVNlbGVjdG9yKCd0ZC5zdW1tYXJ5Jyk7DQogICAgICAgIGlmIChzdW1tYXJ5Q2VsbCkgew0KICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHN1bW1hcnlDZWxsLnRleHRDb250ZW50LnRyaW0oKTsNCiAgICAgICAgICAgIGNvcHlUb0NsaXBib2FyZChjb250ZW50KTsNCiAgICAgICAgICAgIHNob3dOb3RpZmljYXRpb24oJ+WGheWuueW3suWkjeWItuWIsOWJqui0tOadvyEnLCAnIzI4YTc0NScpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUJ1dHRvbnMoKSB7DQogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3RyJykuZm9yRWFjaChyb3cgPT4gew0KICAgICAgICAgICAgY29uc3QgaXNzdWVMaW5rcyA9IHJvdy5xdWVyeVNlbGVjdG9yQWxsKCdhLmlzc3VlLWxpbmsnKTsNCiAgICAgICAgICAgIGlmIChpc3N1ZUxpbmtzLmxlbmd0aCA+PSAyKSB7DQogICAgICAgICAgICAgICAgY29uc3Qgc2Vjb25kTGluayA9IGlzc3VlTGlua3NbMV07DQogICAgICAgICAgICAgICAgaWYgKHNlY29uZExpbmsgJiYgKCFzZWNvbmRMaW5rLm5leHRTaWJsaW5nIHx8IHNlY29uZExpbmsubmV4dFNpYmxpbmcudGFnTmFtZSAhPT0gJ0JVVFRPTicpKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvcHlCdXR0b24gPSBjcmVhdGVDb3B5QnV0dG9uKHNlY29uZExpbmssIHJvdyk7DQogICAgICAgICAgICAgICAgICAgIHNlY29uZExpbmsucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY29weUJ1dHRvbiwgc2Vjb25kTGluay5uZXh0U2libGluZyk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICBjb25zdCBpc3N1ZUtleSA9IGdldElzc3VlS2V5KHJvdyk7DQogICAgICAgICAgICBpZiAoaXNzdWVLZXkpIHsNCiAgICAgICAgICAgICAgICBjb25zdCBwcmlvcml0eUNlbGwgPSByb3cucXVlcnlTZWxlY3RvcigndGQucHJpb3JpdHknKTsNCiAgICAgICAgICAgICAgICBpZiAocHJpb3JpdHlDZWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nQnV0dG9uID0gcHJpb3JpdHlDZWxsLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoIWV4aXN0aW5nQnV0dG9uKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXJrQnV0dG9uID0gY3JlYXRlTWFya0J1dHRvbihyb3cpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcHJpb3JpdHlDZWxsLmFwcGVuZENoaWxkKG1hcmtCdXR0b24pOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUm93KHJvdyk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGdldFJvd0RhdGEoKSB7DQogICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdyb3dEYXRhJykpIHx8IHt9Ow0KICAgICAgICByZXR1cm4gZGF0YTsNCiAgICB9DQoNCiAgICBmdW5jdGlvbiBzYXZlUm93RGF0YShkYXRhKSB7DQogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyb3dEYXRhJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpOw0KICAgIH0NCiAgICAgICAgLy8g5Yid5aeL5YyW5Ye95pWwDQogICAgZnVuY3Rpb24gaW5pdGlhbGl6ZUxpbmtzKCkgew0KICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd0ZC5zdW1tYXJ5IGEuaXNzdWUtbGluaycpLmZvckVhY2gobGluayA9PiB7DQogICAgICAgICAgICBsaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7DQogICAgICAgICAgICAgICAgLy8g5Y+W5raI6buY6K6k55qE54K55Ye76KGM5Li6DQogICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsNCiAgICAgICAgICAgICAgICAvLyDlnKjmlrDpgInpobnljaHkuK3miZPlvIDpk77mjqUNCiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihsaW5rLmhyZWYsICdfYmxhbmsnKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGNvbnN0IHJvd0RhdGEgPSBnZXRSb3dEYXRhKCk7DQoNCiAgICBmb3JtYXRVcGRhdGVkVGltZSgpOw0KICAgIGluaXRpYWxpemVCdXR0b25zKCk7DQogICAgaW5pdGlhbGl6ZUxpbmtzKCk7DQoNCiAvLyDoioLmtYHlh73mlbDvvIznoa7kv53lnKjmjIflrprml7bpl7Tpl7TpmpTlhoXlj6rmiafooYzkuIDmrKENCiAgICBmdW5jdGlvbiB0aHJvdHRsZShmbiwgd2FpdCkgew0KICAgICAgICBsZXQgaXNDYWxsZWQgPSBmYWxzZTsNCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgaWYgKCFpc0NhbGxlZCkgew0KICAgICAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7DQogICAgICAgICAgICAgICAgaXNDYWxsZWQgPSB0cnVlOw0KICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICAgICAgICAgICAgICBpc0NhbGxlZCA9IGZhbHNlOw0KICAgICAgICAgICAgICAgIH0sIHdhaXQpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0NCg0KICAgIC8vIE11dGF0aW9uT2JzZXJ2ZXLnmoTlm57osIPlh73mlbANCiAgICBjb25zdCBvYnNlcnZlckNhbGxiYWNrID0gZnVuY3Rpb24oKSB7DQogICAgICAgIGNvbnNvbGUubG9nKCLop4Llr5/ogIXop6blj5EiKTsNCiAgICAgICAgZm9ybWF0VXBkYXRlZFRpbWUoKTsNCiAgICAgICAgaW5pdGlhbGl6ZUJ1dHRvbnMoKTsNCiAgICAgICAgdXBkYXRlQ29sdW1uSGVhZGVycygpOw0KICAgICAgICBpbml0aWFsaXplTGlua3MoKTsNCiAgICB9Ow0KDQogICAgLy8g5YyF6KOF5ZCO55qE5Zue6LCD5Ye95pWw77yM56Gu5L+d5q+P56eS5pyA5aSa6Kem5Y+R5LiA5qyhDQogICAgY29uc3QgdGhyb3R0bGVkT2JzZXJ2ZXJDYWxsYmFjayA9IHRocm90dGxlKG9ic2VydmVyQ2FsbGJhY2ssIDUwMDApOyAvLyA156eS6IqC5rWBDQoNCiAgICAvLyDop4Llr5/lmajlrp7kvosNCiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHsNCiAgICAgICAgdGhyb3R0bGVkT2JzZXJ2ZXJDYWxsYmFjaygpOw0KICAgIH0pOw0KDQogICAgb2JzZXJ2ZXIub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTsNCg0KICAgIC8vIOWIneasoeaJp+ihjOWbnuiwgw0KICAgIG9ic2VydmVyQ2FsbGJhY2soKTsNCg0KICAgIHVwZGF0ZUNvbHVtbkhlYWRlcnMoKTsNCg0KLy8gICAgIC8vIOebkeWQrOWFs+mUruivjeWPmOWMluW5tuabtOaWsOmrmOS6ruaYvuekug0KLy8gICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjYWxsU2NyaXB0QicsIChldmVudCkgPT4gew0KLy8gICAgICAgICBoaWdobGlnaHRDdXJyZW50VXNlcigpOw0KLy8gICAgIH0pOw0KfSkoKTs="},{"name":"获取所有图片和视频显示右下角翻页","options":{"check_for_updates":true,"user_modified":1726733593623,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_powerful_this":null,"sandbox":null,"noframes":null,"unwrap":null,"run_at":null,"tab_types":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["http://jira-ex.transsion.com/browse/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":[],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null,"orig_run_in":[]},"run_in":null,"tags":[]},"storage":{"ts":1726799516795,"data":{}},"enabled":true,"position":2,"file_url":"https://github.com/Lemou-Memo/jira/raw/main/photo.js","uuid":"873b37c8-0b3a-45f5-a681-3f7343379391","source":"Ly8gPT1Vc2VyU2NyaXB0PT0NCi8vIEBuYW1lICAgICAgICAg6I635Y+W5omA5pyJ5Zu+54mH5ZKM6KeG6aKR5pi+56S65Y+z5LiL6KeS57+76aG1DQovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly90YW1wZXJtb25rZXkubmV0Lw0KLy8gQHZlcnNpb24gICAgICAyLjANCi8vIEBkZXNjcmlwdGlvbiAg6Ieq5Yqo5Zyo5rWP6KeI5Zmo5Lit5pKt5pS+5aqS5L2T6ZO+5o6l77yM5Y+z5LiL6KeS5pi+56S65rWu5Yqo55S75buK77yM5pSv5oyB5YWo5bGP77yM5Zu+5YOP5bGF5Lit5pi+56S6DQovLyBAYXV0aG9yICAgICAgIHBhbmppYWxlDQovLyBAbWF0Y2ggICAgICAgIGh0dHA6Ly9qaXJhLWV4LnRyYW5zc2lvbi5jb20vYnJvd3NlLyoNCi8vIEBpY29uICAgICAgICAgZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFBQUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0NCi8vIEBncmFudCAgICAgICAgbm9uZQ0KLy8gQHVwZGF0ZVVSTCAgICBodHRwczovL2dpdGh1Yi5jb20vTGVtb3UtTWVtby9qaXJhL3Jhdy9tYWluL3Bob3RvLmpzDQovLyBAZG93bmxvYWRVUkwgIGh0dHBzOi8vZ2l0aHViLmNvbS9MZW1vdS1NZW1vL2ppcmEvcmF3L21haW4vcGhvdG8uanMNCi8vID09L1VzZXJTY3JpcHQ9PQ0KKGZ1bmN0aW9uKCkgew0KICAgICd1c2Ugc3RyaWN0JzsNCg0KICAgIC8vIOWIm+W7uua1ruWKqOeUu+W7iuWuueWZqGNlc2hpDQogICAgY29uc3QgZ2FsbGVyeUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnZml4ZWQnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuYm90dG9tID0gJzIwcHgnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUucmlnaHQgPSAnMjBweCc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS53aWR0aCA9ICczNTBweCc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnNjAwcHgnOyAvLyDlop7liqDpq5jluqYNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgwLCAwLCAwLCAwLjgpJzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLmNvbG9yID0gJ3doaXRlJzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICcxMHB4JzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5mbGV4RGlyZWN0aW9uID0gJ2NvbHVtbic7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUuekluZGV4ID0gJzEwMDAnOw0KICAgIGdhbGxlcnlDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcxMHB4JzsgLy8g5re75Yqg5YaF6L656LedDQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5ib3hTaXppbmcgPSAnYm9yZGVyLWJveCc7DQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5vcGFjaXR5ID0gJzEnOyAvLyDnoa7kv53liJ3lp4vpgI/mmI7luqborr7nva7kuLoxDQogICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS50cmFuc2l0aW9uID0gJ29wYWNpdHkgMC41cyc7IC8vIOmakOiXjy/mmL7npLrnmoTlubPmu5Hov4fmuKENCiAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsgLy8g5Yid5aeL54q25oCB5Li66ZqQ6JePDQogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChnYWxsZXJ5Q29udGFpbmVyKTsNCg0KICAgIC8vIOWIm+W7uuaMiemSrueahOmhtumDqOagjw0KICAgIGNvbnN0IHRvcEJhciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgIHRvcEJhci5zdHlsZS53aWR0aCA9ICcxMDAlJzsNCiAgICB0b3BCYXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnOw0KICAgIHRvcEJhci5zdHlsZS50b3AgPSAnMCc7DQogICAgdG9wQmFyLnN0eWxlLmxlZnQgPSAnMCc7DQogICAgdG9wQmFyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7DQogICAgdG9wQmFyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ3NwYWNlLWJldHdlZW4nOw0KICAgIHRvcEJhci5zdHlsZS5wYWRkaW5nID0gJzVweCc7DQogICAgdG9wQmFyLnN0eWxlLmJveFNpemluZyA9ICdib3JkZXItYm94JzsNCiAgICBnYWxsZXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKHRvcEJhcik7DQoNCiAgICAvLyDliJvlu7rkuIrkuIDpobXmjInpkq4NCiAgICBjb25zdCBwcmV2QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7DQogICAgcHJldkJ1dHRvbi50ZXh0Q29udGVudCA9ICc8JzsNCiAgICBwcmV2QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2JhKDI1NSwgMjU1LCAyNTUsIDAuNSknOw0KICAgIHByZXZCdXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnOw0KICAgIHByZXZCdXR0b24uc3R5bGUuY29sb3IgPSAnYmxhY2snOw0KICAgIHByZXZCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCc7DQogICAgcHJldkJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7DQogICAgcHJldkJ1dHRvbi5zdHlsZS56SW5kZXggPSAnMTAwMSc7IC8vIOehruS/neaMiemSruWcqOaJgOacieWFg+e0oOS5i+S4ig0KICAgIHRvcEJhci5hcHBlbmRDaGlsZChwcmV2QnV0dG9uKTsNCg0KICAgIC8vIOWIm+W7uuWFs+mXreaMiemSrg0KICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7DQogICAgY2xvc2VCdXR0b24udGV4dENvbnRlbnQgPSAnWCc7DQogICAgY2xvc2VCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMjU1LCAwLCAwLCAwLjUpJzsNCiAgICBjbG9zZUJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7DQogICAgY2xvc2VCdXR0b24uc3R5bGUuY29sb3IgPSAnd2hpdGUnOw0KICAgIGNsb3NlQnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnOw0KICAgIGNsb3NlQnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsNCiAgICBjbG9zZUJ1dHRvbi5zdHlsZS56SW5kZXggPSAnMTAwMSc7IC8vIOehruS/neaMiemSruWcqOaJgOacieWFg+e0oOS5i+S4ig0KICAgIGNsb3NlQnV0dG9uLnN0eWxlLm1hcmdpbiA9ICcwIDEwcHgnOyAvLyDmjInpkq7kuYvpl7TnmoTpl7Tot50NCiAgICB0b3BCYXIuYXBwZW5kQ2hpbGQoY2xvc2VCdXR0b24pOw0KDQogICAgLy8g5Yib5bu65LiL5LiA6aG15oyJ6ZKuDQogICAgY29uc3QgbmV4dEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpOw0KICAgIG5leHRCdXR0b24udGV4dENvbnRlbnQgPSAnPic7DQogICAgbmV4dEJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiYSgyNTUsIDI1NSwgMjU1LCAwLjUpJzsNCiAgICBuZXh0QnV0dG9uLnN0eWxlLmJvcmRlciA9ICdub25lJzsNCiAgICBuZXh0QnV0dG9uLnN0eWxlLmNvbG9yID0gJ2JsYWNrJzsNCiAgICBuZXh0QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnOw0KICAgIG5leHRCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOw0KICAgIG5leHRCdXR0b24uc3R5bGUuekluZGV4ID0gJzEwMDEnOyAvLyDnoa7kv53mjInpkq7lnKjmiYDmnInlhYPntKDkuYvkuIoNCiAgICB0b3BCYXIuYXBwZW5kQ2hpbGQobmV4dEJ1dHRvbik7DQoNCiAgICAvLyDliJvlu7rlqpLkvZPpobnlrrnlmagNCiAgICBjb25zdCBtZWRpYUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgIG1lZGlhQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEwMCUnOw0KICAgIG1lZGlhQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMDAlJzsNCiAgICBtZWRpYUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOw0KICAgIG1lZGlhQ29udGFpbmVyLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsgICAvLyDlnoLnm7TlsYXkuK0NCiAgICBtZWRpYUNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdjZW50ZXInOyAvLyDmsLTlubPlsYXkuK0NCiAgICBnYWxsZXJ5Q29udGFpbmVyLmFwcGVuZENoaWxkKG1lZGlhQ29udGFpbmVyKTsNCg0KICAgIC8vIOWtmOWCqOaJgOacieWqkuS9k+mhuQ0KICAgIGNvbnN0IG1lZGlhSXRlbXMgPSBbXTsNCiAgICBsZXQgY3VycmVudEluZGV4ID0gMDsNCg0KICAgIC8vIOaYvuekuuW9k+WJjeWqkuS9k+mhueeahOWHveaVsA0KICAgIGZ1bmN0aW9uIHNob3dDdXJyZW50TWVkaWEoKSB7DQogICAgICAgIG1lZGlhSXRlbXMuZm9yRWFjaCgobWVkaWEsIGluZGV4KSA9PiB7DQogICAgICAgICAgICBtZWRpYS5zdHlsZS5kaXNwbGF5ID0gaW5kZXggPT09IGN1cnJlbnRJbmRleCA/ICdibG9jaycgOiAnbm9uZSc7DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIC8vIOafpeaJvumhtemdouS4iueahOaJgOaciemTvuaOpQ0KICAgIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnYScpOw0KDQogICAgbGlua3MuZm9yRWFjaChsaW5rID0+IHsNCiAgICAgICAgY29uc3QgaHJlZiA9IGxpbmsuaHJlZi50b0xvd2VyQ2FzZSgpOyAgLy8g6L2s5o2i5Li65bCP5YaZ5Lul5L6/5LqO5q+U6L6DDQoNCiAgICAgICAgLy8g5qOA5p+l6ZO+5o6l5piv5ZCm5Li6TVA05paH5Lu2DQogICAgICAgIGlmIChocmVmLmVuZHNXaXRoKCcubXA0JykpIHsNCiAgICAgICAgICAgIC8vIOWIm+W7uuinhumikeWFg+e0oA0KICAgICAgICAgICAgY29uc3QgdmlkZW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd2aWRlbycpOw0KICAgICAgICAgICAgdmlkZW8uY29udHJvbHMgPSB0cnVlOw0KICAgICAgICAgICAgdmlkZW8uc3JjID0gaHJlZjsNCiAgICAgICAgICAgIHZpZGVvLnN0eWxlLm1heFdpZHRoID0gJzEwMCUnOw0KICAgICAgICAgICAgdmlkZW8uc3R5bGUubWF4SGVpZ2h0ID0gJzEwMCUnOw0KICAgICAgICAgICAgdmlkZW8uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInOw0KICAgICAgICAgICAgdmlkZW8uc3R5bGUuZGlzcGxheSA9ICdub25lJzsNCg0KICAgICAgICAgICAgLy8g6KeG6aKR55qE5YWo5bGP5pSv5oyBDQogICAgICAgICAgICB2aWRlby5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgIGlmICh2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbikgew0KICAgICAgICAgICAgICAgICAgICB2aWRlby5yZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmlkZW8ud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsgLy8gU2FmYXJpDQogICAgICAgICAgICAgICAgICAgIHZpZGVvLndlYmtpdFJlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2aWRlby5tc1JlcXVlc3RGdWxsc2NyZWVuKSB7IC8vIElFMTENCiAgICAgICAgICAgICAgICAgICAgdmlkZW8ubXNSZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBtZWRpYUl0ZW1zLnB1c2godmlkZW8pOw0KICAgICAgICAgICAgbWVkaWFDb250YWluZXIuYXBwZW5kQ2hpbGQodmlkZW8pOw0KICAgICAgICB9DQogICAgICAgIC8vIOajgOafpemTvuaOpeaYr+WQpuS4uuWbvueJh+aWh+S7tu+8iFBORywgSlBHLCBKUEVHLCBXRUJQ77yJDQogICAgICAgIGVsc2UgaWYgKGhyZWYuZW5kc1dpdGgoJy5wbmcnKSB8fCBocmVmLmVuZHNXaXRoKCcuanBnJykgfHwgaHJlZi5lbmRzV2l0aCgnLmpwZWcnKSB8fCBocmVmLmVuZHNXaXRoKCcud2VicCcpKSB7DQogICAgICAgICAgICAvLyDliJvlu7rlm77niYflhYPntKANCiAgICAgICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpOw0KICAgICAgICAgICAgaW1nLnNyYyA9IGhyZWY7DQogICAgICAgICAgICBpbWcuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7DQogICAgICAgICAgICBpbWcuc3R5bGUubWF4SGVpZ2h0ID0gJzEwMCUnOw0KICAgICAgICAgICAgaW1nLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJzsNCiAgICAgICAgICAgIGltZy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KDQogICAgICAgICAgICAvLyDmt7vliqDlhajlsY/mlK/mjIHnmoTkuovku7bnm5HlkKzlmagNCiAgICAgICAgICAgIGltZy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7DQogICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOw0KICAgICAgICAgICAgICAgIGlmIChpbWcucmVxdWVzdEZ1bGxzY3JlZW4pIHsNCiAgICAgICAgICAgICAgICAgICAgaW1nLnJlcXVlc3RGdWxsc2NyZWVuKCk7DQogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbWcud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4pIHsgLy8gU2FmYXJpDQogICAgICAgICAgICAgICAgICAgIGltZy53ZWJraXRSZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW1nLm1zUmVxdWVzdEZ1bGxzY3JlZW4pIHsgLy8gSUUxMQ0KICAgICAgICAgICAgICAgICAgICBpbWcubXNSZXF1ZXN0RnVsbHNjcmVlbigpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICBtZWRpYUl0ZW1zLnB1c2goaW1nKTsNCiAgICAgICAgICAgIG1lZGlhQ29udGFpbmVyLmFwcGVuZENoaWxkKGltZyk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIOWmguaenOacieWqkuS9k+mhueWImeaYvuekuueUu+W7ig0KICAgIGlmIChtZWRpYUl0ZW1zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOyAvLyDkvb/nlLvlu4rlj6/op4ENCiAgICAgICAgc2hvd0N1cnJlbnRNZWRpYSgpOyAvLyDmmL7npLrnrKzkuIDkuKrlqpLkvZPpobkNCiAgICB9IGVsc2Ugew0KICAgICAgICAvLyDlpoLmnpzmsqHmnInmib7liLDlqpLkvZPpobnvvIzliJnpmpDol4/nlLvlu4rlrrnlmagNCiAgICAgICAgZ2FsbGVyeUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOw0KICAgIH0NCg0KICAgIC8vIOS4uuaMiemSrua3u+WKoOS6i+S7tuebkeWQrOWZqA0KICAgIHByZXZCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgIGlmIChtZWRpYUl0ZW1zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggPiAwKSA/IGN1cnJlbnRJbmRleCAtIDEgOiBtZWRpYUl0ZW1zLmxlbmd0aCAtIDE7DQogICAgICAgICAgICBzaG93Q3VycmVudE1lZGlhKCk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIG5leHRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7DQogICAgICAgIGlmIChtZWRpYUl0ZW1zLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IChjdXJyZW50SW5kZXggPCBtZWRpYUl0ZW1zLmxlbmd0aCAtIDEpID8gY3VycmVudEluZGV4ICsgMSA6IDA7DQogICAgICAgICAgICBzaG93Q3VycmVudE1lZGlhKCk7DQogICAgICAgIH0NCiAgICB9KTsNCg0KICAgIC8vIOS4uuWFs+mXreaMiemSrua3u+WKoOS6i+S7tuebkeWQrOWZqA0KICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gew0KICAgICAgICBnYWxsZXJ5Q29udGFpbmVyLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsgLy8g6ZqQ6JeP55S75buKDQoNCiAgICAgICAgLy8g5YGc5q2i5omA5pyJ6KeG6aKR5pKt5pS+5bm26Z2Z6Z+zDQogICAgICAgIG1lZGlhSXRlbXMuZm9yRWFjaChtZWRpYSA9PiB7DQogICAgICAgICAgICBpZiAobWVkaWEudGFnTmFtZSA9PT0gJ1ZJREVPJykgew0KICAgICAgICAgICAgICAgIG1lZGlhLnBhdXNlKCk7IC8vIOaaguWBnOinhumikQ0KICAgICAgICAgICAgICAgIG1lZGlhLmN1cnJlbnRUaW1lID0gMDsgLy8g6YeN572u5pKt5pS+5pe26Ze0DQogICAgICAgICAgICAgICAgbWVkaWEudm9sdW1lID0gMDsgLy8g6Z2Z6Z+zDQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0pOw0KfSkoKTsNCg=="}]}